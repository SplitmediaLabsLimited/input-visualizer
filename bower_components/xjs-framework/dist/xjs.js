/**
 * XSplit JS Framework
 * version: 1.3.0
 *
 * XSplit Extensibility Framework and Plugin License
 *
 * Copyright (c) 2015, SplitmediaLabs Limited
 * All rights reserved.
 *
 * Redistribution and use in source, minified or binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 *
 * 2. Redistributions in minified or binary form must reproduce the above
 *    copyright notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * 3. This software, in source, minified and binary forms, and any derivatives
 *    hereof, may be used only with the purpose to extend the functionality of the
 *    XSplit products, developed and published by SplitmediaLabs Limited. It may
 *    specifically not be used for extending the functionality of any other software
 *    products which enables live streaming and/or recording functions.
 *
 * 4. This software may not be used to circumvent paid feature restrictions for
 *    free and personal licensees of the XSplit products.
 *
 * THIS SOFTWARE IS PROVIDED BY SPLITMEDIALABS LIMITED ''AS IS'' AND ANY EXPRESS OR
 * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
 * SHALL SPLITMEDIALABS LIMITED BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
 * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
 * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
 * OF SUCH DAMAGE.
 *
 */
require=function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=n[s]={exports:{}};e[s][0].call(p.exports,function(t){var n=e[s][1][t];return r(n?n:t)},p,p.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){var i=t("../internal/app"),r=t("../util/rectangle"),o=t("../system/audio"),s=t("../internal/util/json"),a=t("../internal/util/xml"),u=t("../internal/internal"),c=t("./environment"),p=t("./transition"),l=5,m=1e3,f=function(){function t(){}return t.prototype.getFrametime=function(){return new Promise(function(t){i.App.get("frametime").then(function(e){t(Number(e))})})},t.prototype.getResolution=function(){return new Promise(function(t){i.App.get("resolution").then(function(e){var n=e.split(",");t(r.Rectangle.fromDimensions(parseInt(n[0]),parseInt(n[1])))})})},t.prototype.getViewport=function(){return new Promise(function(t){i.App.get("viewport").then(function(e){var n=e.split(",");t(r.Rectangle.fromDimensions(parseInt(n[0]),parseInt(n[1])))})})},t.prototype.getVersion=function(){return new Promise(function(t,e){var n=/XSplit Broadcaster\s(.*?)\s/,i=navigator.appVersion.match(n);null!==i?t(i[1]):e(Error("not loaded in XSplit Broadcaster"))})},t.prototype.getFramesRendered=function(){return new Promise(function(t){i.App.get("framesrendered").then(function(e){t(Number(e))})})},t.prototype.getPrimaryMic=function(){return new Promise(function(t,e){i.App.getAsList("microphonedev2").then(function(n){var i=n.map(function(t){return o.AudioDevice.parse(t)});i.length&&i.length>0?t(i[0]):e(Error("No audio device is set as primary microphone"))})})},t.prototype.getPrimarySpeaker=function(){return new Promise(function(t,e){i.App.getAsList("microphonedev2").then(function(n){var i=n.map(function(t){return o.AudioDevice.parse(t)});i.length&&i.length>1?t(i[1]):e(Error("No audio device is set as primary speaker"))})})},t.prototype.setPrimaryMicLevel=function(t){return new Promise(function(e,n){0>t&&n(Error("Volume can only be positive")),i.App.getAsList("microphonedev2").then(function(r){var s=r.map(function(t){return o.AudioDevice.parse(t)});if(s.length&&s.length>0){var a=s[0];a._setLevel(t),s[0]=a;var u="";if(Array.isArray(s))for(var c=0;c<s.length;++c)u+=s[c].toString();u="<devices>"+u+"</devices>",i.App.set("microphonedev2",u).then(function(t){e(t)})}else n(Error("No audio device is set as primary microphone"))})})},t.prototype.setPrimaryMicEnabled=function(t){return new Promise(function(e,n){i.App.getAsList("microphonedev2").then(function(r){var s=r.map(function(t){return o.AudioDevice.parse(t)});if(s.length&&s.length>0){var a=s[0];a._setEnabled(t),s[0]=a;var u="";if(Array.isArray(s))for(var c=0;c<s.length;++c)u+=s[c].toString();u="<devices>"+u+"</devices>",i.App.set("microphonedev2",u).then(function(t){e(t)})}else n(Error("No audio device is set as primary microphone"))})})},t.prototype.setPrimaryMicSystemLevel=function(t){return new Promise(function(e,n){0>t&&n(Error("Volume can only be positive")),i.App.getAsList("microphonedev2").then(function(r){var s=r.map(function(t){return o.AudioDevice.parse(t)});if(s.length&&s.length>0){var a=s[0];a._setSystemLevel(t),s[0]=a;var u="";if(Array.isArray(s))for(var c=0;c<s.length;++c)u+=s[c].toString();u="<devices>"+u+"</devices>",i.App.set("microphonedev2",u).then(function(t){e(t)})}else n(Error("No audio device is set as primary microphone"))})})},t.prototype.setPrimaryMicSystemEnabled=function(t){return new Promise(function(e,n){0!==t&&1!==t&&255!==t&&n(Error("Value can only be 0, 1 or 255")),i.App.getAsList("microphonedev2").then(function(r){var s=r.map(function(t){return o.AudioDevice.parse(t)});if(s.length&&s.length>0){var a=s[0];a._setSystemEnabled(t),s[0]=a;var u="";if(Array.isArray(s))for(var c=0;c<s.length;++c)u+=s[c].toString();u="<devices>"+u+"</devices>",i.App.set("microphonedev2",u).then(function(t){e(t)})}else n(Error("No audio device is set as primary microphone"))})})},t.prototype.setPrimaryMicDelay=function(t){return new Promise(function(e,n){0>t&&n(Error("Delay can only be positive")),i.App.getAsList("microphonedev2").then(function(r){var s=r.map(function(t){return o.AudioDevice.parse(t)});if(s.length&&s.length>0){var a=s[0];a._setDelay(t),s[0]=a;var u="";if(Array.isArray(s))for(var c=0;c<s.length;++c)u+=s[c].toString();u="<devices>"+u+"</devices>",i.App.set("microphonedev2",u).then(function(t){e(t)})}else n(Error("No audio device is set as primary microphone"))})})},t.prototype.setPrimarySpeakerLevel=function(t){return new Promise(function(e,n){0>t&&n(Error("Volume can only be positive")),i.App.getAsList("microphonedev2").then(function(r){var s=r.map(function(t){return o.AudioDevice.parse(t)});if(s.length&&s.length>1){var a=s[1];a._setLevel(t),s[1]=a;var u="";if(Array.isArray(s))for(var c=0;c<s.length;++c)u+=s[c].toString();u="<devices>"+u+"</devices>",i.App.set("microphonedev2",u).then(function(t){e(t)})}else n(Error("No audio device is set as primary speaker/audio render device"))})})},t.prototype.setPrimarySpeakerEnabled=function(t){return new Promise(function(e,n){i.App.getAsList("microphonedev2").then(function(r){var s=r.map(function(t){return o.AudioDevice.parse(t)});if(s.length&&s.length>1){var a=s[1];a._setEnabled(t),s[1]=a;var u="";if(Array.isArray(s))for(var c=0;c<s.length;++c)u+=s[c].toString();u="<devices>"+u+"</devices>",i.App.set("microphonedev2",u).then(function(t){e(t)})}else n(Error("No audio device is set as primary speaker/audio render device"))})})},t.prototype.setPrimarySpeakerSystemLevel=function(t){return new Promise(function(e,n){0>t&&n(Error("Volume can only be positive")),i.App.getAsList("microphonedev2").then(function(r){var s=r.map(function(t){return o.AudioDevice.parse(t)});if(s.length&&s.length>1){var a=s[1];a._setSystemLevel(t),s[1]=a;var u="";if(Array.isArray(s))for(var c=0;c<s.length;++c)u+=s[c].toString();u="<devices>"+u+"</devices>",i.App.set("microphonedev2",u).then(function(t){e(t)})}else n(Error("No audio device is set as primary speaker/audio render device"))})})},t.prototype.setPrimarySpeakerSystemEnabled=function(t){return new Promise(function(e,n){0!==t&&1!==t&&255!==t&&n(Error("Value can only 0, 1 or 255")),i.App.getAsList("microphonedev2").then(function(r){var s=r.map(function(t){return o.AudioDevice.parse(t)});if(s.length&&s.length>1){var a=s[1];a._setSystemEnabled(t),s[1]=a;var u="";if(Array.isArray(s))for(var c=0;c<s.length;++c)u+=s[c].toString();u="<devices>"+u+"</devices>",i.App.set("microphonedev2",u).then(function(t){e(t)})}else n(Error("No audio device is set as primary speaker/audio render device"))})})},t.prototype.setPrimarySpeakerDelay=function(t){return new Promise(function(e,n){0>t&&n(Error("Delay can only be positive")),i.App.getAsList("microphonedev2").then(function(r){var s=r.map(function(t){return o.AudioDevice.parse(t)});if(s.length&&s.length>1){var a=s[1];a._setDelay(t),s[1]=a;var u="";if(Array.isArray(s))for(var c=0;c<s.length;++c)u+=s[c].toString();u="<devices>"+u+"</devices>",i.App.set("microphonedev2",u).then(function(t){e(t)})}else n(Error("No audio device is set as primary speaker/audio render device"))})})},t.prototype.isSilenceDetectionEnabled=function(){return new Promise(function(t){i.App.get("microphonegain").then(function(e){var n=s.JSON.parse(e);t("1"==n.enable)})})},t.prototype.enableSilenceDetection=function(t){return new Promise(function(e){i.App.get("microphonegain").then(function(n){var r=s.JSON.parse(n);r.enable=t?"1":"0",i.App.set("microphonegain",a.XML.parseJSON(r).toString()).then(function(t){e(t)})})})},t.prototype.getSilenceDetectionPeriod=function(){return new Promise(function(t){i.App.get("microphonegain").then(function(e){var n=s.JSON.parse(e);t(void 0!==n.latency?Number(n.latency):m)})})},t.prototype.setSilenceDetectionPeriod=function(t){return new Promise(function(e,n){"number"!=typeof t?n(Error("Silence detection period must be a number")):t%1!=0?n(Error("Silence detection period must be an integer")):(0>t||t>6e4)&&n(Error("Silence detection must be in the range 0-60000.")),i.App.get("microphonegain").then(function(n){var r=s.JSON.parse(n);r.latency=t.toString(),i.App.set("microphonegain",a.XML.parseJSON(r).toString()).then(function(t){e(t)})})})},t.prototype.getSilenceDetectionThreshold=function(){return new Promise(function(t){i.App.get("microphonegain").then(function(e){var n=s.JSON.parse(e);t(void 0!==n.gain?Number(n.gain):l)})})},t.prototype.setSilenceDetectionThreshold=function(t){return new Promise(function(e,n){"number"!=typeof t?n(Error("Silence detection threshold must be a number")):t%1!=0?n(Error("Silence detection threshold must be an integer")):(0>t||t>128)&&n(Error("Silence detection threshold must be in the range 0-128.")),i.App.get("microphonegain").then(function(n){var r=s.JSON.parse(n);r.gain=t.toString(),i.App.set("microphonegain",a.XML.parseJSON(r).toString()).then(function(t){e(t)})})})},t.prototype.getTransition=function(){return new Promise(function(t){i.App.get("transitionid").then(function(e){if(""===e)t(p.Transition.NONE);else{var n=p.Transition[e.toUpperCase()];"undefined"!=typeof n?t(n):p.Transition.getSceneTransitions().then(function(n){var i,r,o=!1;for(r=0;r<n.length;r++)if(i=n[r],i.toString()===e){o=!0;break}t(o?i:new p.Transition(e))})["catch"](function(n){t(new p.Transition(e))})}})})},t.prototype.setTransition=function(t){return new Promise(function(e){i.App.set("transitionid",t.toString()).then(function(t){e(t)})})},t.prototype.getTransitionTime=function(){return new Promise(function(t){i.App.get("transitiontime").then(function(e){t(Number(e))})})},t.prototype.setTransitionTime=function(t){return new Promise(function(e){i.App.set("transitiontime",t.toString()).then(function(t){e(t)})})},t.prototype.clearBrowserCookies=function(){return new Promise(function(t,e){c.Environment.isSourcePlugin()?e(new Error("This method is not available to source plugins.")):(u.exec("CallHost","deletecookie:videoitemprop"),t(!0))})},t.prototype.getUserIdHash=function(){return new Promise(function(t){t(i.App.getGlobalProperty("userid"))})},t}();n.App=f},{"../internal/app":34,"../internal/internal":37,"../internal/util/json":39,"../internal/util/xml":41,"../system/audio":42,"../util/rectangle":54,"./environment":4,"./transition":33}],2:[function(t,e,n){var i=t("../internal/app"),r=function(){function t(t){this._name=t.name,this._stat=t.stat,this._channel=t.channel}return t.getActiveStreamChannels=function(){return new Promise(function(e){i.App.getAsList("recstat").then(function(n){if(0===n.length)e([]);else{for(var i=[],r=0;r<n.length;++r)i.push(new t({name:n[r].name,stat:n[r].children[0],channel:n[r].children[1]}));e(i)}})})},t.prototype.getName=function(){var t=this;return new Promise(function(e){e(t._name)})},t.prototype.getStreamDrops=function(){var t=this;return new Promise(function(e){i.App.get("streamdrops:"+t._name).then(function(t){var n=t.split(","),i=Number(n[0])||0;e(i)})})},t.prototype.getStreamRenderedFrames=function(){var t=this;return new Promise(function(e){i.App.get("streamdrops:"+t._name).then(function(t){var n=t.split(","),i=Number(n[1])||0;e(i)})})},t.prototype.getStreamTime=function(){var t=this;return new Promise(function(e){i.App.get("streamtime:"+t._name).then(function(t){var n=Number(t)/10;e(n)})})},t}();n.Channel=r},{"../internal/app":34}],3:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},r=t("../internal/internal"),o=t("../util/eventemitter"),s=function(t){function e(){t.apply(this,arguments)}return i(e,t),e.load=function(t){r.exec("LoadDll",t.join(","))},e.emit=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];n.unshift(t),e._emitter.emit.apply(e._emitter,n)},e.on=function(t,n){e._emitter.on(t,n)},e.call=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return new Promise(function(i,o){var s="CallDll";n.unshift(t),n.unshift(s);var a=r.exec.apply(e,n);void 0!==a?i(a):o("DLL call not accessible.")})},e.callEx=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return new Promise(function(i,o){var s="CallDllEx";n.unshift(t),n.unshift(s);var a=r.exec.apply(e,n);void 0!==a?i(a):o("DLL call not accessible.")})},e.isAccessGranted=function(){return new Promise(function(t){t("1"===r.exec("CheckDllGrant"))})},e._emitter=new e,e}(o.EventEmitter);n.Dll=s,window.UpdateLocalProperty=function(t,e){if("prop:dlldogrant"===t){var n="1"===e;n?s.emit("access-granted"):s.emit("access-revoked")}},window.Setdlldogrant=function(t){var e="1"===t;e?s.emit("access-granted"):s.emit("access-revoked")}},{"../internal/internal":37,"../util/eventemitter":51}],4:[function(t,e,n){var i=function(){function t(){}return t.initialize=function(){t._initialized||(t._isSourcePlugin=window.external&&void 0!==window.external.GetConfiguration,t._isSourceProps=window.external&&void 0===window.external.GetConfiguration&&void 0!==window.external.GetViewId&&void 0!==window.external.GetViewId(),t._isExtension=window.external&&void 0===window.external.GetConfiguration&&void 0!==window.external.GetViewId&&void 0===window.external.GetViewId(),t._initialized=!0)},t.isSourcePlugin=function(){return t._isSourcePlugin},t.isSourceConfig=function(){return t._isSourceProps},t.isSourceProps=function(){return t._isSourceProps},t.isExtension=function(){return t._isExtension},t}();n.Environment=i,i.initialize()},{}],5:[function(t,e,n){var i=t("../core/environment"),r=t("../internal/internal"),o=function(){function t(){if(!i.Environment.isExtension())throw new Error("Extension class can only be used on Extension Plugins");this._presName=window.location.href}return t.getInstance=function(){return void 0===t._instance&&(t._instance=new t),t._instance},t.prototype.saveConfig=function(t){var e=this;return new Promise(function(n,i){"[object Object]"==={}.toString.call(t)?(r.exec("SetPresProperty",e._presName,JSON.stringify(t)),n(e)):i(Error("Configuration object should be in JSON format"))})},t.prototype.loadConfig=function(){var t=this;return new Promise(function(e){r.exec("GetPresProperty",t._presName,function(t){var n=""===t?{}:JSON.parse(t);e(n)})})},t}();n.Extension=o},{"../core/environment":4,"../internal/internal":37}],6:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},r=t("../../internal/util/mixin"),o=t("../../internal/item"),s=t("./iaudio"),a=t("./item"),u=function(t){function e(){t.apply(this,arguments)}return i(e,t),e.prototype.isSilenceDetectionEnabled=function(){var t=this;return new Promise(function(e){o.Item.get("prop:AudioGainEnable",t._id).then(function(t){e("1"===t)})})},e.prototype.setSilenceDetectionEnabled=function(t){var e=this;return new Promise(function(n,i){o.Item.set("prop:AudioGainEnable",t?"1":"0",e._id).then(function(t){n(e)})})},e.prototype.getSilenceThreshold=function(){var t=this;return new Promise(function(e){o.Item.get("prop:AudioGain",t._id).then(function(t){e(Number(t))})})},e.prototype.setSilenceThreshold=function(t){var e=this;return new Promise(function(n,i){"number"!=typeof t?i(Error("Only numbers are acceptable values for threshold")):t%1!==0||0>t||t>128?i(Error("Only integers in the range 0-128 are acceptable for threshold")):o.Item.set("prop:AudioGain",String(t),e._id).then(function(t){n(e)})})},e.prototype.getSilencePeriod=function(){var t=this;return new Promise(function(e){o.Item.get("prop:AudioGainLatency",t._id).then(function(t){e(Number(t))})})},e.prototype.setSilencePeriod=function(t){var e=this;return new Promise(function(n,i){"number"!=typeof t?i(Error("Only numbers are acceptable values for period")):t%1!==0||0>t||t>1e4?i(Error("Only integers in the range 0-10000 are acceptable for period")):o.Item.set("prop:AudioGainLatency",String(t),e._id).then(function(t){n(e)})})},e.prototype.getAudioOffset=function(){var t=this;return new Promise(function(e){o.Item.get("prop:AudioDelay",t._id).then(function(t){e(Number(t))})})},e.prototype.setAudioOffset=function(t){var e=this;return new Promise(function(n,i){"number"!=typeof t?i(Error("Only numbers are acceptable values for period")):0>t?i(Error("Audio offset cannot be negative")):o.Item.set("prop:AudioDelay",String(t),e._id).then(function(t){n(e)})})},e}(a.Item);n.AudioItem=u,r.applyMixins(u,[s.ItemAudio])},{"../../internal/item":38,"../../internal/util/mixin":40,"./iaudio":12,"./item":19}],7:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},r=t("../../internal/util/mixin"),o=t("../../internal/item"),s=t("./ilayout"),a=t("./icolor"),u=t("./ichroma"),c=t("./itransition"),p=t("./iaudio"),l=t("./item"),m=t("../../system/system"),f=function(t){function e(){t.apply(this,arguments),this._delayExclusionObject={roxio:"vid_1b80&pid_e0(01|11|12)",hauppauge1:"vid_2040&pid_49(0[0-3]|8[0-3])",hauppauge2:"vid_2040&pid_e50[012a4]"}}return i(e,t),e.prototype.getDeviceId=function(){var t=this;return new Promise(function(e){o.Item.get("prop:item",t._id).then(function(t){e(t)})})},e.prototype.isStreamPaused=function(){var t=this;return new Promise(function(e){o.Item.get("prop:StreamPause",t._id).then(function(t){e("1"===t)})})},e.prototype.setStreamPaused=function(t){var e=this;return new Promise(function(n,i){o.Item.set("prop:StreamPause",t?"1":"0",e._id).then(function(){return o.Item.get("prop:StreamPause",e._id)}).then(function(r){t===("1"===r)?n(e):i(new Error("Camera feed cannot be paused/resumed or is not present"))})})},e.prototype.isHardwareEncoder=function(){var t=this;return new Promise(function(e,n){o.Item.get("prop:hwencoder",t._id).then(function(i){"1"===i?e(!0):t.isActive().then(function(t){t?e(!1):n(new Error("Cannot check hardware encoding. Device not present"))})})})},e.prototype.isActive=function(){var t=this;return new Promise(function(e){o.Item.get("prop:activestate",t._id).then(function(t){e("active"===t)})})},e.prototype.getDelay=function(){var t=this;return new Promise(function(e){var n,i;o.Item.get("prop:StreamDelay",t._id).then(function(e){return n=Number(e),o.Item.get("prop:AudioDelay",t._id)}).then(function(t){i=Number(t),e(i>n?n/1e4:i/1e4)})})},e.prototype.setDelay=function(t){var e=this;return new Promise(function(n,i){var r,s;e.isHardwareEncoder().then(function(t){return t!==!0?e.getValue():void i(new Error("Cannot set delay to hardware encoder devices"))}).then(function(t){for(var n in e._delayExclusionObject){var r=new RegExp(e._delayExclusionObject[n].toLowerCase(),"g");if("string"==typeof t&&null!=t.toLowerCase().match(r)){i(new Error("Cannot set delay to specific device"));break}}return e.getAudioOffset()}).then(function(n){return s=n,s>=0?(r=!0,o.Item.set("prop:StreamDelay",String(1e4*t),e._id)):(r=!1,o.Item.set("prop:StreamDelay",String(1e4*(t+-1*s)),e._id))}).then(function(n){return r?o.Item.set("prop:AudioDelay",String(1e4*(t+s)),e._id):o.Item.set("prop:AudioDelay",String(1e4*t),e._id)}).then(function(t){n(e)})})},e.prototype.getAudioOffset=function(){var t=this;return new Promise(function(e){var n,i;o.Item.get("prop:StreamDelay",t._id).then(function(e){return n=Number(e),o.Item.get("prop:AudioDelay",t._id)}).then(function(t){i=Number(t),e((i-n)/1e4)})})},e.prototype.setAudioOffset=function(t){var e=this;return new Promise(function(n,i){var r,s;o.Item.get("prop:itemaudio",e._id).then(function(t){return r=t,e.isAudioAvailable()}).then(function(t){return t!==!1||""!==r?e.getDelay():void i(new Error("Device has no audio"))}).then(function(n){return s=n,t>=0?o.Item.set("prop:StreamDelay",String(1e4*s),e._id):o.Item.set("prop:StreamDelay",String(1e4*(s+-1*t)),e._id)}).then(function(n){return t>=0?o.Item.set("prop:AudioDelay",String(1e4*(s+t)),e._id):o.Item.set("prop:AudioDelay",String(1e4*s),e._id)}).then(function(t){n(e)})})},e.prototype.getAudioInput=function(){var t=this;return new Promise(function(e,n){var i;o.Item.get("prop:itemaudio",t._id).then(function(t){return""!==t?(i=t,m.System.getMicrophones()):void n(new Error("No tied audio input"))}).then(function(t){var r;if(void 0!==t)for(var o=0;o<t.length;++o)if(t[o].getDisplayId()===i){r=t[o];break}void 0!==r?e(r):n(new Error("Tied audio input not present"))})})},e.prototype.setAudioInput=function(t){var e=this;return new Promise(function(n,i){o.Item.set("prop:itemaudio",t.getDisplayId(),e._id).then(function(t){n(e)})})},e.prototype.isForceDeinterlace=function(){var t=this;return new Promise(function(e){o.Item.get("prop:fdeinterlace",t._id).then(function(t){e("3"===t)})})},e.prototype.setForceDeinterlace=function(t){var e=this;return new Promise(function(n){o.Item.set("prop:fdeinterlace",t?"3":"0",e._id).then(function(){n(e)})})},e.prototype.setColorOptionsPinned=function(t){var e=this;return new Promise(function(n){o.Item.set("prop:cc_pin",t?"1":"0",e._id).then(function(){n(e)})})},e.prototype.getColorOptionsPinned=function(){var t=this;return new Promise(function(e){o.Item.get("prop:cc_pin",t._id).then(function(t){e("1"===t)})})},e.prototype.setKeyingOptionsPinned=function(t){var e=this;return new Promise(function(n){o.Item.set("prop:key_pin",t?"1":"0",e._id).then(function(){n(e)})})},e.prototype.getKeyingOptionsPinned=function(){var t=this;return new Promise(function(e){o.Item.get("prop:key_pin",t._id).then(function(t){e("1"===t)})})},e}(l.Item);n.CameraItem=f,r.applyMixins(f,[s.ItemLayout,a.ItemColor,u.ItemChroma,c.ItemTransition,p.ItemAudio])},{"../../internal/item":38,"../../internal/util/mixin":40,"../../system/system":48,"./iaudio":12,"./ichroma":13,"./icolor":14,"./ilayout":16,"./item":19,"./itransition":20}],8:[function(t,e,n){var i=function(){function t(t,e){this._time=t,this._action=e}return t.prototype.toString=function(){return String(1e7*this._time)+this._action},t.prototype.setTime=function(t){this._time=t},t.prototype.setAction=function(e){if(e!==t.PAUSE&&e!==t.RESUME&&e!==t.CUT)throw new Error("Trying to set to an invalid Cue Point action.");this._action=e},t.prototype.getTime=function(){return this._time/1e7},t.prototype.getAction=function(){return this._action},t._fromString=function(e){var n=[e.substring(0,e.length-1),e.charAt(e.length-1)],i=n[0],r=n[1];return new t(Number(i),r)},t.PAUSE="p",t.RESUME="r",t.CUT="s",t}();n.CuePoint=i},{}],9:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},r=t("../../internal/util/mixin"),o=t("../../internal/item"),s=t("./ilayout"),a=t("./icolor"),u=t("./ichroma"),c=t("./itransition"),p=t("./iaudio"),l=t("./item"),m=t("../../util/rectangle"),f=function(t){function e(){t.apply(this,arguments)}return i(e,t),e.prototype.getCustomResolution=function(){var t=this;return new Promise(function(e){var n;o.Item.get("prop:BrowserSize",t._id).then(function(t){if(""!==t){var i=decodeURIComponent(t).split(","),r=i[0],o=i[1];n=m.Rectangle.fromDimensions(Number(r),Number(o))}else n=m.Rectangle.fromDimensions(0,0);e(n)})})},e.prototype.setCustomResolution=function(t){var e=this;return new Promise(function(n){o.Item.set("prop:BrowserSize",t.toDimensionString(),e._id).then(function(){n(e)})})},e.prototype.getAllowRightClick=function(){var t=this;return new Promise(function(e){o.Item.get("prop:BrowserRightClick",t._id).then(function(t){e("1"===t)})})},e.prototype.setAllowRightClick=function(t){var e=this;return new Promise(function(n){o.Item.set("prop:BrowserRightClick",t?"1":"0",e._id).then(function(){n(e)})})},e}(l.Item);n.FlashItem=f,r.applyMixins(f,[s.ItemLayout,a.ItemColor,u.ItemChroma,c.ItemTransition,p.ItemAudio])},{"../../internal/item":38,"../../internal/util/mixin":40,"../../util/rectangle":54,"./iaudio":12,"./ichroma":13,"./icolor":14,"./ilayout":16,"./item":19,"./itransition":20}],10:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},r=t("../../internal/util/mixin"),o=t("../../internal/item"),s=t("./ilayout"),a=t("./icolor"),u=t("./ichroma"),c=t("./itransition"),p=t("./item"),l=t("../../internal/util/json"),m=t("../../internal/util/xml"),f=t("./item"),h=t("../environment"),d=function(t){function e(){t.apply(this,arguments)}return i(e,t),e.prototype.isSpecialOptimizationEnabled=function(){var t=this;return new Promise(function(e){o.Item.get("GameCapSurfSharing",t._id).then(function(t){e("1"===t)})})},e.prototype.setSpecialOptimizationEnabled=function(t){var e=this;return new Promise(function(n){o.Item.set("GameCapSurfSharing",t?"1":"0",e._id).then(function(){n(e)})})},e.prototype.isShowMouseEnabled=function(){var t=this;return new Promise(function(e){o.Item.get("GameCapShowMouse",t._id).then(function(t){e("1"===t)})})},e.prototype.setShowMouseEnabled=function(t){var e=this;return new Promise(function(n){o.Item.set("GameCapShowMouse",t?"1":"0",e._id).then(function(){n(e)})})},e.prototype.setOfflineImage=function(t){var e=this;return new Promise(function(n,i){if(e._type!==f.ItemTypes.GAMESOURCE)i(Error("Current item should be a game item"));else if(h.Environment.isSourcePlugin())i(Error("Source plugins cannot update offline images of other items"));else if(e._value instanceof m.XML){var r=new RegExp('^(([A-Z|a-z]:\\\\[^*|"<>?\n]*)|(\\\\\\\\.*?\\\\.*)|([A-Za-z]+\\\\[^*|"<>?\\n]*)).(png|gif|jpg|jpeg|tif)$');if(r.test(t)||""===t){var o=l.JSON.parse(e._value.toString());o.replace=t,e.setValue(m.XML.parseJSON(o)).then(function(){n(e)})}}else e.getValue().then(function(){e.setOfflineImage(t).then(function(t){n(t)})})})},e.prototype.getOfflineImage=function(){var t=this;return new Promise(function(e,n){t._type!==f.ItemTypes.GAMESOURCE?n(Error("Current item should be a game item")):t.getValue().then(function(){var n=l.JSON.parse(t._value.toString());e(n.replace?n.replace:"")})})},e}(p.Item);n.GameItem=d,r.applyMixins(d,[s.ItemLayout,a.ItemColor,u.ItemChroma,c.ItemTransition])},{"../../internal/item":38,"../../internal/util/json":39,"../../internal/util/mixin":40,"../../internal/util/xml":41,"../environment":4,"./ichroma":13,"./icolor":14,"./ilayout":16,"./item":19,"./itransition":20}],11:[function(require,module,exports){var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},internal_1=require("../../internal/internal"),mixin_1=require("../../internal/util/mixin"),item_1=require("../../internal/item"),ilayout_1=require("./ilayout"),icolor_1=require("./icolor"),ichroma_1=require("./ichroma"),itransition_1=require("./itransition"),iconfig_1=require("./iconfig"),iaudio_1=require("./iaudio"),item_2=require("./item"),rectangle_1=require("../../util/rectangle"),environment_1=require("../environment"),HtmlItem=function(_super){function HtmlItem(){_super.apply(this,arguments)}return __extends(HtmlItem,_super),HtmlItem.prototype.getURL=function(){var t=this;return new Promise(function(e){item_1.Item.get("prop:item",t._id).then(function(t){var n=String(t).split("*");t=n[0],e(t)})})},HtmlItem.prototype.setURL=function(t){var e=this;return new Promise(function(n,i){item_1.Item.set("prop:item",t,e._id).then(function(t){t?n(e):i("Invalid value")})})},HtmlItem.prototype.getBrowserJS=function(){var t=this;return new Promise(function(e){item_1.Item.get("prop:custom",t._id).then(function(t){var n="";try{var i=JSON.parse(t);i.hasOwnProperty("customJS")&&(n=i.customJS)}catch(r){}e(n)})})},HtmlItem.prototype.setBrowserJS=function(t,e){var n=this;return void 0===e&&(e=!1),new Promise(function(i,r){var o={};item_1.Item.get("prop:custom",n._id).then(function(e){var i="",r=" ",s=!0,a=!0;try{o=JSON.parse(e),o.hasOwnProperty("cssEnabled")&&(a="true"==o.cssEnabled),o.hasOwnProperty("scriptEnabled")&&(s="true"==o.scriptEnabled),o.hasOwnProperty("customCSS")&&(i=o.customCSS)}catch(u){}if(o.cssEnabled=a.toString(),o.scriptEnabled=s.toString(),o.customCSS=i,o.customJS=t,a===!0){var c="var xjsCSSOverwrite = document.createElement('style');xjsCSSOverwrite.id = 'splitmedialabsCSSOverwrite';xjsCSSOverwrite.type = 'text/css';var h = document.querySelector('head');var existing = document.querySelector('head #splitmedialabsCSSOverwrite');if (existing != null)h.removeChild(existing);xjsCSSOverwrite.innerHTML = '"+i.replace(/(\r\n|\n|\r)/gm,"").replace(/\s{2,}/g," ").replace(/(\[br\])/gm,"")+"';h.appendChild(xjsCSSOverwrite);";r+=c}return""!==t&&s===!0&&(r+=t),item_1.Item.set("prop:BrowserJs",r,n._id)}).then(function(){return item_1.Item.set("prop:custom",JSON.stringify(o),n._id)}).then(function(){e?item_1.Item.set("refresh","",n._id).then(function(){i(n)}):i(n)})})},HtmlItem.prototype.isBrowserJSEnabled=function(){var t=this;return new Promise(function(e){item_1.Item.get("prop:custom",t._id).then(function(t){var n=!0;try{var i=JSON.parse(t);i.hasOwnProperty("scriptEnabled")&&(n="true"==i.scriptEnabled)}catch(r){}e(n)})})},HtmlItem.prototype.enableBrowserJS=function(t){var e=this;return new Promise(function(n,i){var r={};item_1.Item.get("prop:custom",e._id).then(function(n){var i="",o="",s=" ",a=!0;try{r=JSON.parse(n),r.hasOwnProperty("cssEnabled")&&(a="true"==r.cssEnabled),r.hasOwnProperty("customJS")&&(i=r.customJS),r.hasOwnProperty("customCSS")&&(o=r.customCSS)}catch(u){}if(r.cssEnabled=a.toString(),r.scriptEnabled=t.toString(),r.customJS=i,r.customCSS=o,a===!0){var c='var xjsCSSOverwrite = document.createElement("style");xjsCSSOverwrite.id = "splitmedialabsCSSOverwrite";xjsCSSOverwrite.type = "text/css";var h = document.querySelector("head");var existing = document.querySelector("head #splitmedialabsCSSOverwrite");if (existing != null)h.removeChild(existing);xjsCSSOverwrite.innerHTML = "'+o.replace(/(\r\n|\n|\r)/gm,"").replace(/\s{2,}/g," ").replace(/(\[br\])/gm,"")+'";"h.appendChild(xjsCSSOverwrite);';s+=c}return""!==i&&t===!0&&(s+=i),item_1.Item.set("prop:BrowserJs",s,e._id)}).then(function(){return item_1.Item.set("prop:custom",JSON.stringify(r),e._id)}).then(function(){t?n(e):item_1.Item.set("refresh","",e._id).then(function(){n(e)})})})},HtmlItem.prototype.getCustomCSS=function(){var t=this;return new Promise(function(e){item_1.Item.get("prop:custom",t._id).then(function(t){var n="";try{var i=JSON.parse(t);i.hasOwnProperty("customCSS")&&(n=i.customCSS)}catch(r){}e(n)})})},HtmlItem.prototype.setCustomCSS=function(t){var e=this;return new Promise(function(n,i){var r={};item_1.Item.get("prop:custom",e._id).then(function(n){var i="",o=" ",s=!0,a=!0;try{r=JSON.parse(n),r.hasOwnProperty("cssEnabled")&&(a="true"==r.cssEnabled),r.hasOwnProperty("scriptEnabled")&&(s="true"==r.scriptEnabled),r.hasOwnProperty("customJS")&&(i=r.customJS)}catch(u){}if(r.cssEnabled=a.toString(),r.scriptEnabled=s.toString(),r.customJS=i,r.customCSS=t,a===!0){var c='var xjsCSSOverwrite = document.createElement("style");xjsCSSOverwrite.id = "splitmedialabsCSSOverwrite";xjsCSSOverwrite.type = "text/css";var h = document.querySelector("head");var existing = document.querySelector("head #splitmedialabsCSSOverwrite");if (existing != null)h.removeChild(existing);xjsCSSOverwrite.innerHTML = "'+t.replace(/(\r\n|\n|\r)/gm,"").replace(/\s{2,}/g," ").replace(/(\[br\])/gm,"")+'";h.appendChild(xjsCSSOverwrite);';o+=c}return""!==i&&s===!0&&(o+=i),item_1.Item.set("prop:BrowserJs",o,e._id)}).then(function(){return item_1.Item.set("prop:custom",JSON.stringify(r),e._id)}).then(function(){n(e)})})},HtmlItem.prototype.isCustomCSSEnabled=function(){var t=this;return new Promise(function(e){item_1.Item.get("prop:custom",t._id).then(function(t){var n=!0;try{var i=JSON.parse(t);i.hasOwnProperty("cssEnabled")&&(n="true"==i.cssEnabled)}catch(r){}e(n)})})},HtmlItem.prototype.enableCustomCSS=function(value){
var _this=this;return new Promise(function(resolve,reject){var customObject={};item_1.Item.get("prop:custom",_this._id).then(function(t){var e="",n="",i=" ",r=!0;try{customObject=JSON.parse(t),customObject.hasOwnProperty("scriptEnabled")&&(r="true"==customObject.scriptEnabled),customObject.hasOwnProperty("customJS")&&(e=customObject.customJS),customObject.hasOwnProperty("customCSS")&&(n=customObject.customCSS)}catch(o){}if(customObject.scriptEnabled=r.toString(),customObject.cssEnabled=value.toString(),customObject.customJS=e,customObject.customCSS=n,value===!0){var s='var xjsCSSOverwrite = document.createElement("style");xjsCSSOverwrite.id = "splitmedialabsCSSOverwrite";xjsCSSOverwrite.type = "text/css";var h = document.querySelector("head");var existing = document.querySelector("head #splitmedialabsCSSOverwrite");if (existing != null)h.removeChild(existing);xjsCSSOverwrite.innerHTML = "'+n.replace(/(\r\n|\n|\r)/gm,"").replace(/\s{2,}/g," ").replace(/(\[br\])/gm,"")+'";h.appendChild(xjsCSSOverwrite);';i+=s}return""!==e&&value===r&&(i+=e),item_1.Item.set("prop:BrowserJs",i,_this._id)}).then(function(){return item_1.Item.set("prop:custom",JSON.stringify(customObject),_this._id)}).then(function(){if(value)resolve(_this);else{var cssScript="var h = document.querySelector('head');var existing3 = document.querySelector('head #splitmedialabsCSSOverwrite');if (existing3 != null)h.removeChild(existing3);";environment_1.Environment.isSourcePlugin()?eval(cssScript):internal_1.exec("CallInner","eval",cssScript),resolve(_this)}})})},HtmlItem.prototype.isBrowserTransparent=function(){var t=this;return new Promise(function(e){item_1.Item.get("prop:BrowserTransparent",t._id).then(function(t){e("1"===t)})})},HtmlItem.prototype.enableBrowserTransparency=function(t){var e=this;return new Promise(function(n){item_1.Item.set("prop:BrowserTransparent",t?"1":"0",e._id).then(function(){n(e)})})},HtmlItem.prototype.getBrowserCustomSize=function(){var t=this;return new Promise(function(e){var n;item_1.Item.get("prop:BrowserSize",t._id).then(function(t){if(""!==t){var i=decodeURIComponent(t).split(","),r=i[0],o=i[1];n=rectangle_1.Rectangle.fromDimensions(Number(r)/window.devicePixelRatio,Number(o)/window.devicePixelRatio)}else n=rectangle_1.Rectangle.fromDimensions(0,0);e(n)})})},HtmlItem.prototype.setBrowserCustomSize=function(t){var e=this;return new Promise(function(n){t.setWidth(t.getWidth()*window.devicePixelRatio),t.setHeight(t.getHeight()*window.devicePixelRatio),item_1.Item.set("prop:BrowserSize",t.toDimensionString(),e._id).then(function(){n(e)})})},HtmlItem.prototype.getAllowRightClick=function(){var t=this;return new Promise(function(e){item_1.Item.get("prop:BrowserRightClick",t._id).then(function(t){e("1"===t)})})},HtmlItem.prototype.setAllowRightClick=function(t){var e=this;return new Promise(function(n){item_1.Item.set("prop:BrowserRightClick",t?"1":"0",e._id).then(function(){n(e)})})},HtmlItem}(item_2.Item);exports.HtmlItem=HtmlItem,mixin_1.applyMixins(HtmlItem,[ilayout_1.ItemLayout,icolor_1.ItemColor,ichroma_1.ItemChroma,itransition_1.ItemTransition,iconfig_1.ItemConfigurable,iaudio_1.ItemAudio])},{"../../internal/internal":37,"../../internal/item":38,"../../internal/util/mixin":40,"../../util/rectangle":54,"../environment":4,"./iaudio":12,"./ichroma":13,"./icolor":14,"./iconfig":15,"./ilayout":16,"./item":19,"./itransition":20}],12:[function(t,e,n){var i=t("../../internal/item"),r=function(){function t(){}return t.prototype.getVolume=function(){var t=this;return new Promise(function(e){i.Item.get("prop:volume",t._id).then(function(t){e(Number(t))})})},t.prototype.setVolume=function(t){var e=this;return new Promise(function(n){t=0>t?0:t>100?100:t,i.Item.set("prop:volume",String(t),e._id).then(function(){n(e)})})},t.prototype.isMute=function(){var t=this;return new Promise(function(e){i.Item.get("prop:mute",t._id).then(function(t){e("1"===t)})})},t.prototype.setMute=function(t){var e=this;return new Promise(function(n){i.Item.set("prop:mute",t?"1":"0",e._id).then(function(){n(e)})})},t.prototype.isStreamOnlyAudio=function(){var t=this;return new Promise(function(e){i.Item.get("prop:sounddev",t._id).then(function(t){e("1"===t)})})},t.prototype.setStreamOnlyAudio=function(t){var e=this;return new Promise(function(n){i.Item.set("prop:sounddev",t?"1":"0",e._id).then(function(){n(e)})})},t.prototype.isAudioAvailable=function(){var t=this;return new Promise(function(e){i.Item.get("prop:audioavail",t._id).then(function(t){e("1"===t)})})},t}();n.ItemAudio=r},{"../../internal/item":38}],13:[function(t,e,n){var i=t("../../internal/item"),r=t("../../util/color");!function(t){t[t.LEGACY=0]="LEGACY",t[t.COLORKEY=1]="COLORKEY",t[t.RGBKEY=2]="RGBKEY"}(n.KeyingType||(n.KeyingType={}));n.KeyingType;!function(t){t[t.RED=0]="RED",t[t.GREEN=1]="GREEN",t[t.BLUE=2]="BLUE"}(n.ChromaPrimaryColors||(n.ChromaPrimaryColors={}));n.ChromaPrimaryColors;!function(t){t[t.NONE=0]="NONE",t[t.LOW=1]="LOW",t[t.HIGH=2]="HIGH"}(n.ChromaAntiAliasLevel||(n.ChromaAntiAliasLevel={}));var o=(n.ChromaAntiAliasLevel,function(){function t(){}return t.prototype.isChromaEnabled=function(){var t=this;return new Promise(function(e){i.Item.get("prop:key_chromakey",t._id).then(function(t){e("1"===t)})})},t.prototype.setChromaEnabled=function(t){var e=this;return new Promise(function(n,r){"boolean"!=typeof t?r(TypeError("Parameter should be boolean.")):i.Item.set("prop:key_chromakey",t?"1":"0",e._id).then(function(){n(e)})})},t.prototype.getKeyingType=function(){var t=this;return new Promise(function(e){i.Item.get("prop:key_chromakeytype",t._id).then(function(t){e(Number(t))})})},t.prototype.setKeyingType=function(t){var e=this;return new Promise(function(n,r){"number"!=typeof t?r(TypeError("Use a KeyingType value as the parameter.")):0>t||t>2?r(RangeError("Use a KeyingType value as the parameter.")):i.Item.set("prop:key_chromakeytype",String(t),e._id).then(function(){n(e)})})},t.prototype.getChromaAntiAliasLevel=function(){var t=this;return new Promise(function(e){i.Item.get("prop:key_antialiasing",t._id).then(function(t){e(Number(t))})})},t.prototype.setChromaAntiAliasLevel=function(t){var e=this;return new Promise(function(n,r){"number"!=typeof t?r(TypeError("Use a ChromaAntiAliasLevel value as the parameter.")):0>t||t>2?r(RangeError("Use a ChromaAntiAliasLevel value as the parameter.")):i.Item.set("prop:key_antialiasing",String(t),e._id).then(function(){n(e)})})},t.prototype.getChromaLegacyBrightness=function(){var t=this;return new Promise(function(e){i.Item.get("prop:key_chromabr",t._id).then(function(t){e(Number(t))})})},t.prototype.setChromaLegacyBrightness=function(t){var e=this;return new Promise(function(n,r){"number"!=typeof t?r(TypeError("Use an integer as the parameter.")):0>t||t>255?r(RangeError("Valid value is an integer from 0-255.")):i.Item.set("prop:key_chromabr",String(t),e._id).then(function(){n(e)})})},t.prototype.getChromaLegacySaturation=function(){var t=this;return new Promise(function(e){i.Item.get("prop:key_chromasat",t._id).then(function(t){e(Number(t))})})},t.prototype.setChromaLegacySaturation=function(t){var e=this;return new Promise(function(n,r){"number"!=typeof t?r(TypeError("Use an integer as the parameter.")):0>t||t>255?r(RangeError("Valid value is an integer from 0-255.")):i.Item.set("prop:key_chromasat",String(t),e._id).then(function(){n(e)})})},t.prototype.getChromaLegacyHue=function(){var t=this;return new Promise(function(e){i.Item.get("prop:key_chromahue",t._id).then(function(t){e(Number(t))})})},t.prototype.setChromaLegacyHue=function(t){var e=this;return new Promise(function(n,r){"number"!=typeof t?r(TypeError("Use an integer as the parameter.")):0>t||t>180?r(RangeError("Valid value is an integer from 0-180.")):i.Item.set("prop:key_chromahue",String(t),e._id).then(function(){n(e)})})},t.prototype.getChromaLegacyThreshold=function(){var t=this;return new Promise(function(e){i.Item.get("prop:key_chromarang",t._id).then(function(t){e(Number(t))})})},t.prototype.setChromaLegacyThreshold=function(t){var e=this;return new Promise(function(n,r){"number"!=typeof t?r(TypeError("Use an integer as the parameter.")):0>t||t>255?r(RangeError("Valid value is an integer from 0-255.")):i.Item.set("prop:key_chromarang",String(t),e._id).then(function(){n(e)})})},t.prototype.getChromaLegacyAlphaSmoothing=function(){var t=this;return new Promise(function(e){i.Item.get("prop:key_chromaranga",t._id).then(function(t){e(Number(t))})})},t.prototype.setChromaLegacyAlphaSmoothing=function(t){var e=this;return new Promise(function(n,r){"number"!=typeof t?r(TypeError("Use an integer as the parameter.")):0>t||t>255?r(RangeError("Valid value is an integer from 0-255.")):i.Item.set("prop:key_chromaranga",String(t),e._id).then(function(){n(e)})})},t.prototype.getChromaRGBKeyPrimaryColor=function(){var t=this;return new Promise(function(e){i.Item.get("prop:key_chromargbkeyprimary",t._id).then(function(t){e(Number(t))})})},t.prototype.setChromaRGBKeyPrimaryColor=function(t){var e=this;return new Promise(function(n,r){"number"!=typeof t?r(TypeError("Use a ChromaPrimaryColors value as the parameter.")):0>t||t>2?r(RangeError("Use a ChromaPrimaryColors value as the parameter.")):i.Item.set("prop:key_chromargbkeyprimary",String(t),e._id).then(function(){n(e)})})},t.prototype.getChromaRGBKeyThreshold=function(){var t=this;return new Promise(function(e){i.Item.get("prop:key_chromargbkeythresh",t._id).then(function(t){e(Number(t))})})},t.prototype.setChromaRGBKeyThreshold=function(t){var e=this;return new Promise(function(n,r){"number"!=typeof t?r(TypeError("Use an integer as the parameter.")):0>t||t>255?r(RangeError("Valid value is an integer from 0-255.")):i.Item.set("prop:key_chromargbkeythresh",String(t),e._id).then(function(){n(e)})})},t.prototype.getChromaRGBKeyExposure=function(){var t=this;return new Promise(function(e){i.Item.get("prop:key_chromargbkeybalance",t._id).then(function(t){e(Number(t))})})},t.prototype.setChromaRGBKeyExposure=function(t){var e=this;return new Promise(function(n,r){"number"!=typeof t?r(TypeError("Use an integer as the parameter.")):0>t||t>255?r(RangeError("Valid value is an integer from 0-255.")):i.Item.set("prop:key_chromargbkeybalance",String(t),e._id).then(function(){n(e)})})},t.prototype.getChromaColorKeyThreshold=function(){var t=this;return new Promise(function(e){i.Item.get("prop:key_colorrang",t._id).then(function(t){e(Number(t))})})},t.prototype.setChromaColorKeyThreshold=function(t){var e=this;return new Promise(function(n,r){"number"!=typeof t?r(TypeError("Use an integer as the parameter.")):0>t||t>255?r(RangeError("Valid value is an integer from 0-255.")):i.Item.set("prop:key_colorrang",String(t),e._id).then(function(){n(e)})})},t.prototype.getChromaColorKeyExposure=function(){var t=this;return new Promise(function(e){i.Item.get("prop:key_colorranga",t._id).then(function(t){e(Number(t))})})},t.prototype.setChromaColorKeyExposure=function(t){var e=this;return new Promise(function(n,r){"number"!=typeof t?r(TypeError("Use an integer as the parameter.")):0>t||t>255?r(RangeError("Valid value is an integer from 0-255.")):i.Item.set("prop:key_colorranga",String(t),e._id).then(function(){n(e)})})},t.prototype.getChromaColorKeyColor=function(){var t=this;return new Promise(function(e){i.Item.get("prop:key_colorrgb",t._id).then(function(t){var n=r.Color.fromBGRString(t);e(n)})})},t.prototype.setChromaColorKeyColor=function(t){var e=this;return new Promise(function(n){i.Item.set("prop:key_colorrgb",String(t.getIbgr()),e._id).then(function(){n(e)})})},t}());n.ItemChroma=o},{"../../internal/item":38,"../../util/color":50}],14:[function(t,e,n){var i=t("../../internal/item"),r=t("../../util/color"),o=function(){function t(){}return t.prototype.getTransparency=function(){var t=this;return new Promise(function(e){i.Item.get("prop:alpha",t._id).then(function(t){e(Number(t))})})},t.prototype.setTransparency=function(t){var e=this;return new Promise(function(n,r){0>t||t>255?r(RangeError("Transparency may only be in the range 0 to 255.")):i.Item.set("prop:alpha",String(t),e._id).then(function(){n(e)})})},t.prototype.getBrightness=function(){var t=this;return new Promise(function(e){i.Item.get("prop:cc_brightness",t._id).then(function(t){e(Number(t))})})},t.prototype.setBrightness=function(t){var e=this;return new Promise(function(n,r){-100>t||t>100?r(RangeError("Brightness may only be in the range -100 to 100.")):i.Item.set("prop:cc_brightness",String(t),e._id).then(function(){n(e)})})},t.prototype.getContrast=function(){var t=this;return new Promise(function(e){i.Item.get("prop:cc_contrast",t._id).then(function(t){e(Number(t))})})},t.prototype.setContrast=function(t){var e=this;return new Promise(function(n,r){-100>t||t>100?r(RangeError("Contrast may only be in the range -100 to 100.")):i.Item.set("prop:cc_contrast",String(t),e._id).then(function(){n(e)})})},t.prototype.getHue=function(){var t=this;return new Promise(function(e){i.Item.get("prop:cc_hue",t._id).then(function(t){e(Number(t))})})},t.prototype.setHue=function(t){var e=this;return new Promise(function(n,r){-180>t||t>180?r(RangeError("Contrast may only be in the range -180 to 180.")):i.Item.set("prop:cc_hue",String(t),e._id).then(function(){n(e)})})},t.prototype.getSaturation=function(){var t=this;return new Promise(function(e){i.Item.get("prop:cc_saturation",t._id).then(function(t){e(Number(t))})})},t.prototype.setSaturation=function(t){var e=this;return new Promise(function(n,r){-100>t||t>100?r(RangeError("Saturation may only be in the range -100 to 100")):i.Item.set("prop:cc_saturation",String(t),e._id).then(function(){n(e)})})},t.prototype.getBorderColor=function(){var t=this;return new Promise(function(e){i.Item.get("prop:border",t._id).then(function(t){var n=Number(t)-2147483648,i=r.Color.fromBGRInt(n);e(i)})})},t.prototype.setBorderColor=function(t){var e=this;return new Promise(function(n,r){i.Item.set("prop:border",String(t.getIbgr()-2147483648),e._id).then(function(){n(e)})})},t.prototype.isFullDynamicColorRange=function(){var t=this;return new Promise(function(e){i.Item.get("prop:cc_dynamicrange",t._id).then(function(t){e("1"===t)})})},t.prototype.setFullDynamicColorRange=function(t){var e=this;return new Promise(function(n,r){"boolean"!=typeof t?r(TypeError("Parameter should be boolean.")):i.Item.set("prop:cc_dynamicrange",t?"1":"0",e._id).then(function(){n(e)})})},t}();n.ItemColor=o},{"../../internal/item":38,"../../util/color":50}],15:[function(t,e,n){var i=t("../../internal/item"),r=t("../../internal/global"),o=t("../../internal/internal"),s=t("../environment"),a=function(){function t(){}return t.prototype.loadConfig=function(){var t=this;return new Promise(function(e){i.Item.get("prop:BrowserConfiguration",t._id).then(function(t){var n="null"===t?{}:JSON.parse(t),i=r.Global.getPersistentConfig();for(var o in i)delete n[o];e(n)})})},t.prototype.saveConfig=function(t){var e=this;return new Promise(function(n,a){if(s.Environment.isSourcePlugin){var u=i.Item.attach(e._id);if(0===u)if("[object Object]"==={}.toString.call(t)){var c=r.Global.getPersistentConfig();for(var p in c)t[p]=c[p];o.exec("SetBrowserProperty","Configuration",JSON.stringify(t)),n(e)}else a(Error("Configuration object should be in JSON format."));else a(Error("Items may only request other Items to save a configuration. Consider calling requestSaveConfig() on this Item instance instead."))}else a(Error("Extensions and source properties windows are not allowed to directly save configuration objects. Call requestSaveConfig() instead."))})},t.prototype.requestSaveConfig=function(t){var e=this;return new Promise(function(n){var r=i.Item.attach(e._id);o.exec("CallInner"+(0===r?"":r+1),"MessageSource",JSON.stringify({request:"saveConfig",data:t})),n(e)})},t.prototype.applyConfig=function(t){var e=this;return new Promise(function(n){var r=i.Item.attach(e._id);o.exec("CallInner"+(0===r?"":r+1),"MessageSource",JSON.stringify({request:"applyConfig",data:t})),n(e)})},t}();n.ItemConfigurable=a},{"../../internal/global":35,"../../internal/internal":37,"../../internal/item":38,"../environment":4}],16:[function(t,e,n){var i=t("../../internal/item"),r=t("../../util/rectangle"),o=function(){function t(){}return t.prototype._getCanvasAndZRotate=function(t){var e={};return t>=-180&&-135>=t?(e.canvasRotate=180,e.zRotate=t+180,e.orientation="landscape"):t>-135&&-45>t?(e.canvasRotate=270,e.zRotate=t+90,e.orientation="portrait"):t>=-45&&45>=t?(e.canvasRotate=0,e.zRotate=t,e.orientation="landscape"):t>45&&135>t?(e.canvasRotate=90,e.zRotate=t-90,e.orientation="portrait"):t>=135&&180>=t&&(e.canvasRotate=180,e.zRotate=t-180,e.orientation="landscape"),e},t.prototype._adjustRotation=function(t){return t>180?t-=360:-180>t&&(t+=360),t},t.prototype.isKeepAspectRatio=function(){var t=this;return new Promise(function(e){i.Item.get("prop:keep_ar",t._id).then(function(t){e("1"===t)})})},t.prototype.setKeepAspectRatio=function(t){var e=this;return new Promise(function(n){i.Item.set("prop:keep_ar",t?"1":"0",e._id).then(function(){n(e)})})},t.prototype.isPositionLocked=function(){var t=this;return new Promise(function(e){i.Item.get("prop:lockmove",t._id).then(function(t){e("1"===t)})})},t.prototype.setPositionLocked=function(t){var e=this;return new Promise(function(n){i.Item.set("prop:lockmove",t?"1":"0",e._id).then(function(){n(e)})})},t.prototype.isEnhancedResizeEnabled=function(){var t=this;return new Promise(function(e){i.Item.get("prop:mipmaps",t._id).then(function(t){e("1"===t)})})},t.prototype.setEnhancedResizeEnabled=function(t){var e=this;return new Promise(function(n){i.Item.set("prop:mipmaps",t?"1":"0",e._id).then(function(){n(e)})})},t.prototype.getPosition=function(){var t=this;return new Promise(function(e){i.Item.get("prop:pos",t._id).then(function(n){var i=String(n).split(","),o=i[0],s=i[1],a=i[2],u=i[3];t.position=r.Rectangle.fromCoordinates(Number(o),Number(s),Number(a),Number(u)),e(t.position)})})},t.prototype.setPosition=function(t){var e=this;return new Promise(function(n,r){try{i.Item.set("prop:pos",t.toCoordinateString(),e._id).then(function(){n(e)})}catch(o){r(o)}})},t.prototype.getRotateY=function(){var t=this;return new Promise(function(e){i.Item.get("prop:rotate_y",t._id).then(function(t){e(Number(t))})})},t.prototype.setRotateY=function(t){var e=this;return new Promise(function(n,r){-360>t||t>360?r(Error("Invalid value. Min: -360, Max: 360")):i.Item.set("prop:rotate_y",String(t),e._id).then(function(){n(e)})})},t.prototype.getRotateX=function(){var t=this;return new Promise(function(e){i.Item.get("prop:rotate_x",t._id).then(function(t){e(Number(t))})})},t.prototype.setRotateX=function(t){var e=this;return new Promise(function(n,r){-360>t||t>360?r(Error("Invalid value. Min: -360, Max: 360")):i.Item.set("prop:rotate_x",String(t),e._id).then(function(){n(e)})})},t.prototype.getRotateZ=function(){var t=this;return new Promise(function(e){i.Item.get("prop:rotate_z",t._id).then(function(t){e(Number(t))})})},t.prototype.setRotateZ=function(t){var e=this;return new Promise(function(n,r){-360>t||t>360?r(Error("Invalid value. Min: -360, Max: 360")):i.Item.set("prop:rotate_z",String(t),e._id).then(function(){n(e)})})},t.prototype.getCropping=function(){var t=this;return new Promise(function(e){var n={};i.Item.get("prop:crop",t._id).then(function(t){var i=String(t).split(","),r=i[0],o=i[1],s=i[2],a=i[3];n.left=Number(r),n.top=Number(o),n.right=Number(s),n.bottom=Number(a),e(n)})})},t.prototype.setCropping=function(t){var e=this;return new Promise(function(n,r){t.hasOwnProperty("top")&&t.hasOwnProperty("left")&&t.hasOwnProperty("right")&&t.hasOwnProperty("bottom")?i.Item.set("prop:crop",t.left.toFixed(6)+","+t.top.toFixed(6)+","+t.right.toFixed(6)+","+t.bottom.toFixed(6),e._id).then(function(){n(e)}):r("Error setting cropping, insufficient properties (left, top, right, bottom)")})},t.prototype.getCanvasRotate=function(){var t=this;return new Promise(function(e){i.Item.get("prop:rotate_canvas",t._id).then(function(t){var n=Number(t);e([0,90,180,270].indexOf(n)<0?0:n)})})},t.prototype.setCanvasRotate=function(t){var e=this;return new Promise(function(n,r){[0,90,180,270].indexOf(t)<0?r(Error("Invalid value. Only possible values are 0, 90, 180 and 270")):i.Item.set("prop:rotate_canvas",String(t),e._id).then(function(){n(e)})})},t.prototype.getEnhancedRotate=function(){var t=this;return new Promise(function(e){var n,r,o;i.Item.get("prop:rotate_z",t._id).then(function(e){return n=Number(e),i.Item.get("prop:rotate_canvas",t._id)}).then(function(i){r=Number(i),o=t._adjustRotation(r+n),e(o)})})},t.prototype.setEnhancedRotate=function(t){var e=this;return new Promise(function(n,r){if(-180>t||t>180)r(Error("Invalid value. Min: -180, Max: 180"));else{var o,s=e._getCanvasAndZRotate(Number(t));e.getEnhancedRotate().then(function(t){return o=e._getCanvasAndZRotate(Number(t)),i.Item.set("prop:rotate_z",String(s.zRotate),e._id)}).then(function(){return i.Item.set("prop:rotate_canvas",String(s.canvasRotate),e._id)}).then(function(){if(o.orientation!==s.orientation){var t,n,r;i.Item.get("mixerresolution",e._id).then(function(o){return t=o.split(","),n=Number(t[0]),r=Number(t[1]),i.Item.get("prop:pos",e._id)}).then(function(t){var o,s,a,u,c=t.split(","),p=parseFloat(c[0])*n,l=parseFloat(c[1])*r,m=parseFloat(c[2])*n,f=parseFloat(c[3])*r,h=Math.round(m-p),d=Math.round(f-l);if(d>n)o=0,s=n;else{var g=p+(m-p)/2;o=g-d/2,s=g+d/2}if(h>r)a=0,u=r;else{var v=l+(f-l)/2;a=v-h/2,u=v+h/2}var y=o/n,_=a/r,w=s/n,S=u/r;return i.Item.set("prop:pos",y.toFixed(6)+","+_.toFixed(6)+","+w.toFixed(6)+","+S.toFixed(6),e._id)}).then(function(){return i.Item.get("prop:posaspect",e._id)}).then(function(t){return i.Item.set("prop:pos",t,e._id)})}})}})},t.prototype.setCroppingEnhanced=function(t){var e=this;return new Promise(function(n,r){if(t.hasOwnProperty("top")&&t.hasOwnProperty("left")&&t.hasOwnProperty("right")&&t.hasOwnProperty("bottom")){var o,s,a,u,c,p={};i.Item.get("mixerresolution",e._id).then(function(t){return a=t.split(","),i.Item.get("prop:pos",e._id)}).then(function(t){return u=t.split(","),i.Item.get("prop:rotate_canvas",e._id)}).then(function(t){return c=t,i.Item.get("prop:crop",e._id)}).then(function(r){var l=parseInt(a[0]),m=parseInt(a[1]),f=parseFloat(u[0])*l,h=parseFloat(u[1])*m,d=parseFloat(u[2])*l,g=parseFloat(u[3])*m,v=d-f,y=g-h,_=r.split(","),w=parseFloat(_[0]),S=parseFloat(_[1]),P=parseFloat(_[2]),I=parseFloat(_[3]),b=Math.round(100*w),E=Math.round(100*S),C=Math.round(100*P),A=Math.round(100*I),O=0==b&&0==E&&0==C&&0==A;if(270==c)if(O)p=u,s=v,o=y;else{var x=parseFloat(u[3]),N=parseFloat(u[0]),L=parseFloat(u[1]),T=parseFloat(u[2]);if(0!=w||0!=P){o=y/(1-P-w);var R=o*w/m;p[3]=x+R;var D=o*P/m;p[1]=L-D}else o=y;if(0!=S||0!=I){s=v/(1-I-S);var M=s*S/l;p[0]=N-M;var F=s*I/l;p[2]=T+F}else s=v;0==w&&(p[3]=u[3]),0==S&&(p[0]=u[0]),0==P&&(p[1]=u[1]),0==I&&(p[2]=u[2])}else if(180==c)if(O)p=u,o=v,s=y;else{var x=parseFloat(u[2]),N=parseFloat(u[3]),L=parseFloat(u[0]),T=parseFloat(u[1]);if(0!=w||0!=P){o=v/(1-P-w);var R=o*w/l;p[2]=x+R;var D=o*P/l;p[0]=L-D}else o=v;if(0!=S||0!=I){s=y/(1-I-S);var M=s*S/m;p[3]=N+M;var F=s*I/m;p[1]=T-F}else s=y;0==w&&(p[2]=u[2]),0==S&&(p[3]=u[3]),0==P&&(p[0]=u[0]),0==I&&(p[1]=u[1])}else if(90==c)if(O)p=u,s=v,o=y;else{var x=parseFloat(u[1]),N=parseFloat(u[2]),L=parseFloat(u[3]),T=parseFloat(u[0]);if(0!=w||0!=P){o=y/(1-P-w);var R=o*w/m;p[1]=x-R;var D=o*P/m;p[3]=L+D}else o=y;if(0!=S||0!=I){s=v/(1-I-S);var M=s*S/l;p[2]=N+M;var F=s*I/l;p[0]=T-F}else s=v;0==w&&(p[1]=u[1]),0==S&&(p[2]=u[2]),0==P&&(p[3]=u[3]),0==I&&(p[0]=u[0])}else if(O)p=u,s=y,o=v;else{var x=parseFloat(u[0]),N=parseFloat(u[1]),L=parseFloat(u[2]),T=parseFloat(u[3]);if(0!=w||0!=P){o=v/(1-P-w);var R=o*w/l;p[0]=x-R;var D=o*P/l;p[2]=L+D}else o=v;if(0!=S||0!=I){s=y/(1-I-S);var M=s*S/m;p[1]=N-M;var F=s*I/m;p[3]=T+F}else s=y;0==w&&(p[0]=u[0]),0==S&&(p[1]=u[1]),0==P&&(p[2]=u[2]),0==I&&(p[3]=u[3])}var k,B,G,V,H=t.left,j=t.top,J=t.right,U=t.bottom,x=parseFloat(p[0]),N=parseFloat(p[1]),L=parseFloat(p[2]),T=parseFloat(p[3]),q=(T-N)*m,z=(L-x)*l;270==c?(k=j*z/l+x,B=J*q/m+N,G=L-U*z/l,V=T-H*q/m):180==c?(k=J*z/l+x,B=U*q/m+N,G=L-H*z/l,V=T-j*q/m):90==c?(k=U*z/l+x,B=H*q/m+N,G=L-j*z/l,V=T-J*q/m):(k=H*z/l+x,B=j*q/m+N,G=L-J*z/l,V=T-U*q/m),i.Item.set("prop:crop",t.left.toFixed(6)+","+t.top.toFixed(6)+","+t.right.toFixed(6)+","+t.bottom.toFixed(6),e._id).then(function(){return i.Item.set("prop:pos",k.toFixed(6)+","+B.toFixed(6)+","+G.toFixed(6)+","+V.toFixed(6),e._id)}).then(function(){n(e)})})}else r("Error setting cropping, insufficient properties (left, top, right, bottom)")})},t}();n.ItemLayout=o},{"../../internal/item":38,"../../util/rectangle":54}],17:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},r=t("../../internal/util/mixin"),o=t("./ilayout"),s=t("./icolor"),a=t("./ichroma"),u=t("./itransition"),c=t("./item"),p=function(t){function e(){t.apply(this,arguments)}return i(e,t),e}(c.Item);n.ImageItem=p,r.applyMixins(p,[o.ItemLayout,s.ItemColor,a.ItemChroma,u.ItemTransition])},{"../../internal/util/mixin":40,"./ichroma":13,"./icolor":14,"./ilayout":16,"./item":19,"./itransition":20}],18:[function(t,e,n){var i=t("../../internal/item"),r=t("./cuepoint");!function(t){t[t.NONE=0]="NONE",t[t.REWIND=1]="REWIND",t[t.LOOP=2]="LOOP",t[t.TRANSPARENT=3]="TRANSPARENT",t[t.HIDE=4]="HIDE"}(n.ActionAfterPlayback||(n.ActionAfterPlayback={}));var o=(n.ActionAfterPlayback,/\.(mp3|aac|cda|ogg|m4a|flac|wma|aiff|aif|wav|mid|midi|rma)$/),s=/\.(avi|flv|mkv|mp4|mpg|wmv|3gp|3g2|asf|f4v|mov|mpeg|vob|webm)$/,a=function(){function t(){}return t.prototype.isSeekable=function(){var t=this;return new Promise(function(e){i.Item.get("sync:syncable",t._id).then(function(t){e("1"===t)})})},t.prototype.getPlaybackPosition=function(){var t=this;return new Promise(function(e){i.Item.get("sync:position",t._id).then(function(t){e(Number(t)/1e7)})})},t.prototype.setPlaybackPosition=function(t){var e=this;return new Promise(function(n){i.Item.set("sync:position",String(1e7*t),e._id).then(function(){n(e)})})},t.prototype.getPlaybackDuration=function(){var t=this;return new Promise(function(e){i.Item.get("sync:duration",t._id).then(function(t){e(Number(t)/1e7)})})},t.prototype.isPlaying=function(){var t=this;return new Promise(function(e){i.Item.get("sync:state",t._id).then(function(t){e("running"===t)})})},t.prototype.setPlaying=function(t){var e=this;return new Promise(function(n){i.Item.set("sync:state",t?"running":"stopped",e._id).then(function(){n(e)})})},t.prototype.getPlaybackStartPosition=function(){var t=this;return new Promise(function(e){i.Item.get("prop:InPoint",t._id).then(function(t){e(Number(t)/1e7)})})},t.prototype.setPlaybackStartPosition=function(t){var e=this;return new Promise(function(n){i.Item.set("prop:InPoint",String(1e7*t),e._id).then(function(){n(e)})})},t.prototype.getPlaybackEndPosition=function(){var t=this;return new Promise(function(e){i.Item.get("prop:OutPoint",t._id).then(function(t){e(Number(t)/1e7)})})},t.prototype.setPlaybackEndPosition=function(t){var e=this;return new Promise(function(n){i.Item.set("prop:OutPoint",String(1e7*t),e._id).then(function(){n(e)})})},t.prototype.getActionAfterPlayback=function(){var t=this;return new Promise(function(e){i.Item.get("prop:OpWhenFinished",t._id).then(function(t){e(Number(t))})})},t.prototype.setActionAfterPlayback=function(t){var e=this;return new Promise(function(n){i.Item.set("prop:OpWhenFinished",String(t),e._id).then(function(){n(e)})})},t.prototype.isAutostartOnSceneLoad=function(){var t=this;return new Promise(function(e){i.Item.get("prop:StartOnLoad",t._id).then(function(t){e("1"===t)})})},t.prototype.setAutostartOnSceneLoad=function(t){var e=this;return new Promise(function(n){i.Item.set("prop:StartOnLoad",t?"1":"0",e._id).then(function(){n(e)})})},t.prototype.isForceDeinterlace=function(){var t=this;return new Promise(function(e){i.Item.get("prop:fdeinterlace",t._id).then(function(t){e("3"===t)})})},t.prototype.setForceDeinterlace=function(t){var e=this;return new Promise(function(n){i.Item.set("prop:fdeinterlace",t?"3":"0",e._id).then(function(){n(e)})})},t.prototype.isRememberingPlaybackPosition=function(){var t=this;return new Promise(function(e){i.Item.get("prop:RememberPosition",t._id).then(function(t){e("1"===t)})})},t.prototype.setRememberingPlaybackPosition=function(t){var e=this;return new Promise(function(n){i.Item.set("prop:RememberPosition",t?"1":"0",e._id).then(function(){n(e)})})},t.prototype.isShowingPlaybackPosition=function(){var t=this;return new Promise(function(e){i.Item.get("prop:ShowPosition",t._id).then(function(t){e("1"===t)})})},t.prototype.setShowingPlaybackPosition=function(t){var e=this;return new Promise(function(n){i.Item.set("prop:ShowPosition",t?"1":"0",e._id).then(function(){n(e)})})},t.prototype.getCuePoints=function(){var t=this;return new Promise(function(e){i.Item.get("prop:CuePoints",t._id).then(function(t){if(""===t)e([]);else{var n=t.split(","),i=n.map(function(t){return r.CuePoint._fromString(t)});e(i)}})})},t.prototype.setCuePoints=function(t){var e=this;return new Promise(function(n){t.map(function(t){return t.toString()}).join(",");n(e)})},t.prototype.isAudio=function(){var t=this;return new Promise(function(e){i.Item.get("prop:item",t._id).then(function(t){e(o.test(t))})})},t.prototype.isVideo=function(){var t=this;return new Promise(function(e){i.Item.get("prop:item",t._id).then(function(t){e(s.test(t))})})},t.prototype.getValue=function(){var t=this;return new Promise(function(e){i.Item.get("prop:item",t._id).then(function(t){e(t)})})},t.prototype.setValue=function(t){var e=this;return new Promise(function(n,r){s.test(t)||o.test(t)?i.Item.set("prop:item",t,e._id).then(function(){return i.Item.set("prop:name",t,e._id)}).then(function(){return i.Item.set("prop:CuePoints","",e._id)}).then(function(){n(e)}):r(new Error("You can only set the value to a valid media type"))})},t}();n.ItemPlayback=a},{"../../internal/item":38,"./cuepoint":8}],19:[function(t,e,n){var i=t("../../internal/util/mixin"),r=t("../../internal/item"),o=t("../../internal/app"),s=t("../environment"),a=t("../../internal/util/json"),u=t("../../internal/util/xml"),c=t("../scene"),p=t("./ilayout");!function(t){t[t.UNDEFINED=0]="UNDEFINED",t[t.FILE=1]="FILE",t[t.LIVE=2]="LIVE",t[t.TEXT=3]="TEXT",t[t.BITMAP=4]="BITMAP",t[t.SCREEN=5]="SCREEN",t[t.FLASHFILE=6]="FLASHFILE",t[t.GAMESOURCE=7]="GAMESOURCE",t[t.HTML=8]="HTML"}(n.ItemTypes||(n.ItemTypes={}));var l=n.ItemTypes;!function(t){t[t.MAIN=0]="MAIN",t[t.PREVIEW=1]="PREVIEW",t[t.THUMBNAIL=2]="THUMBNAIL"}(n.ViewTypes||(n.ViewTypes={}));var m=n.ViewTypes,f=function(){function t(t){t=t?t:{},this._name=t.name,this._cname=t.cname,this._id=t.id,this._sceneId=t.sceneId,this._value=t.value,this._keepLoaded=t.keeploaded,this._type=Number(t.type),this._xmlparams=t}return t.prototype.setName=function(t){var e=this;return new Promise(function(n){e._name=t,r.Item.set("prop:name",e._name,e._id).then(function(){n(e)})})},t.prototype.getName=function(){var t=this;return new Promise(function(e){r.Item.get("prop:name",t._id).then(function(n){t._name=n,e(n)})})},t.prototype.setCustomName=function(t){var e=this;return new Promise(function(n){e._cname=t,r.Item.set("prop:cname",e._cname,e._id).then(function(){n(e)})})},t.prototype.getCustomName=function(){var t=this;return new Promise(function(e){r.Item.get("prop:cname",t._id).then(function(n){t._cname=n,e(n)})})},t.prototype.getValue=function(){var t=this;return new Promise(function(e){r.Item.get("prop:item",t._id).then(function(n){if(n="null"===n?"":n,""===n)t._value="",e(n);else try{t._value=u.XML.parseJSON(a.JSON.parse(n)),e(t._value)}catch(i){t._value=n,e(n)}})})},t.prototype.setValue=function(t){var e=this;return new Promise(function(n){var i="string"==typeof t?t:t.toString();"string"!=typeof t?e._value=a.JSON.parse(i):e._value=i,r.Item.set("prop:item",i,e._id).then(function(){n(e)})})},t.prototype.getKeepLoaded=function(){
var t=this;return new Promise(function(e){r.Item.get("prop:keeploaded",t._id).then(function(n){t._keepLoaded="1"===n,e(t._keepLoaded)})})},t.prototype.setKeepLoaded=function(t){var e=this;return new Promise(function(n){e._keepLoaded=t,r.Item.set("prop:keeploaded",e._keepLoaded?"1":"0",e._id).then(function(){n(e)})})},t.prototype.getType=function(){var t=this;return new Promise(function(e){r.Item.get("prop:type",t._id).then(function(n){t._type=l[l[Number(n)]],e(t._type)})})},t.prototype.getId=function(){var t=this;return new Promise(function(e){e(t._id)})},t.prototype.getSceneId=function(){var t=this;return new Promise(function(e){e(Number(t._sceneId)+1)})},t.prototype.getView=function(){var t=this;return new Promise(function(e){r.Item.get("prop:viewid",t._id).then(function(t){var n=m.MAIN;if("1"===t){var i=o.App.getGlobalProperty("preview_editor_opened");n="1"===i?m.PREVIEW:m.THUMBNAIL}e(n)})})},t.prototype.toXML=function(){var t=new a.JSON;return t.tag="item",t.name=this._name,t.item=this._value,t.type=this._type,t.selfclosing=!0,this._cname&&(t.cname=this._cname),u.XML.parseJSON(t)},t.getCurrentSource=function(){return new Promise(function(e,n){s.Environment.isExtension()?n(Error("Extensions do not have sources associated with them.")):(s.Environment.isSourcePlugin()||s.Environment.isSourceConfig())&&t.getItemList().then(function(t){t.length>0?c.Scene.searchSourcesById(t[0]._id).then(function(t){e(t)}):n(Error("Cannot get item list"))})})},t.getItemList=function(){return new Promise(function(e,n){s.Environment.isExtension()?n(Error("Extensions do not have sources associated with them.")):(s.Environment.isSourcePlugin()||s.Environment.isSourceConfig())&&r.Item.get("itemlist").then(function(n){var i=[],r=n.split(",");r.forEach(function(e){i.push(new Promise(function(n){n(new t({id:e}))}))}),Promise.all(i).then(function(t){e(t)})})})},t.prototype.refresh=function(){var t=this;return new Promise(function(e){r.Item.set("refresh","",t._id).then(function(){e(t)})})},t}();n.Item=f,i.applyMixins(f,[p.ItemLayout])},{"../../internal/app":34,"../../internal/item":38,"../../internal/util/json":39,"../../internal/util/mixin":40,"../../internal/util/xml":41,"../environment":4,"../scene":23,"./ilayout":16}],20:[function(t,e,n){var i=t("../../internal/item"),r=t("../transition"),o=function(){function t(){}return t.prototype.isVisible=function(){var t=this;return new Promise(function(e){i.Item.get("prop:visible",t._id).then(function(t){e("1"===t)})})},t.prototype.setVisible=function(t){var e=this;return new Promise(function(n){i.Item.set("prop:visible",t?"1":"0",e._id).then(function(){n(e)})})},t.prototype.getTransition=function(){var t=this;return new Promise(function(e){i.Item.get("prop:transitionid",t._id).then(function(t){e(""===t?r.Transition.NONE:r.Transition[t.toUpperCase()])})})},t.prototype.setTransition=function(t){var e=this;return new Promise(function(n){i.Item.set("prop:transitionid",t.toString(),e._id).then(function(){n(e)})})},t.prototype.getTransitionTime=function(){var t=this;return new Promise(function(e){i.Item.get("prop:transitiontime",t._id).then(function(t){e(Number(t))})})},t.prototype.setTransitionTime=function(t){var e=this;return new Promise(function(n,r){0>t||t>6e4?r(RangeError("Transparency may only be in the range 0 to 60000.")):i.Item.set("prop:transitiontime",String(t),e._id).then(function(){n(e)})})},t}();n.ItemTransition=o},{"../../internal/item":38,"../transition":33}],21:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},r=t("../../internal/util/mixin"),o=t("../../internal/item"),s=t("./ilayout"),a=t("./icolor"),u=t("./ichroma"),c=t("./itransition"),p=t("./iplayback"),l=t("./iaudio"),m=t("./item"),f=t("../../internal/util/json"),h=function(t){function e(){t.apply(this,arguments)}return i(e,t),e.prototype.getFileInfo=function(){var t=this;return new Promise(function(e,n){o.Item.get("FileInfo",t._id).then(function(t){try{var i={},r=f.JSON.parse(t);if("undefined"!=typeof r.children&&r.children.length>0){for(var o=r.children,s=o.length-1;s>=0;s--){for(var a=o[s],u={},c=Object.keys(a),p=c.length-1;p>=0;p--){var l=c[p];"value"!==l&&"tag"!==l&&(u[l]=a[l])}var m=a.tag;i[m]=u}e(i)}else e(i)}catch(h){n(Error("Error retrieving file information"))}})})},e}(m.Item);n.MediaItem=h,r.applyMixins(h,[s.ItemLayout,a.ItemColor,u.ItemChroma,c.ItemTransition,p.ItemPlayback,l.ItemAudio])},{"../../internal/item":38,"../../internal/util/json":39,"../../internal/util/mixin":40,"./iaudio":12,"./ichroma":13,"./icolor":14,"./ilayout":16,"./iplayback":18,"./item":19,"./itransition":20}],22:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},r=t("../../internal/util/mixin"),o=t("../../internal/item"),s=t("./ilayout"),a=t("./icolor"),u=t("./ichroma"),c=t("./itransition"),p=t("./item"),l=t("../../util/rectangle"),m=t("../../internal/util/json"),f=t("../../internal/util/xml"),h=function(t){function e(){t.apply(this,arguments)}return i(e,t),e.prototype.getCaptureArea=function(){var t=this;return new Promise(function(e){t.getValue().then(function(t){if(t instanceof f.XML){var n=m.JSON.parse(t);e(l.Rectangle.fromCoordinates(Number(n.left),Number(n.top),Number(n.width)+Number(n.left),Number(n.height)+Number(n.top)))}else e(l.Rectangle.fromCoordinates(0,0,0,0))})})},e.prototype.setCaptureArea=function(t){var e=this;return new Promise(function(n){e.getValue().then(function(t){return new Promise(function(n){o.Item.get("screenresolution",e._id).then(function(e){var i=e.split(",");n({value:t,res:l.Rectangle.fromCoordinates(Number(i[0]),Number(i[1]),Number(i[2]),Number(i[3]))})})})}).then(function(i){var r=new m.JSON;i.value instanceof f.XML?r=m.JSON.parse(i.value):(r.tag="screen",r.module="",r.window="",r.hwnd="0",r.wclient="0",r.left="0",r.top="0",r.width="0",r.height="0"),r.left=t.getLeft()>=i.res.getLeft()?t.getLeft():Number(r.left)>=i.res.getLeft()?r.left:i.res.getLeft(),r.top=t.getTop()>=i.res.getTop()?t.getTop():Number(r.top)>=i.res.getTop()?r.top:i.res.getTop(),r.width=t.getWidth()<=i.res.getWidth()?t.getWidth():Number(r.width)<=i.res.getWidth()?r.width:i.res.getWidth(),r.height=t.getHeight()<=i.res.getHeight()?t.getHeight():Number(r.height)<=i.res.getHeight()?r.height:i.res.getHeight(),e.setValue(f.XML.parseJSON(r)).then(function(){n(e)})})})},e.prototype.isClientArea=function(){var t=this;return new Promise(function(e){t.getValue().then(function(t){if(t instanceof f.XML){var n=m.JSON.parse(t);e("1"===n.wclient)}else e(!1)})})},e.prototype.setClientArea=function(t){var e=this;return new Promise(function(n){e.getValue().then(function(i){var r=new m.JSON;i instanceof f.XML?r=m.JSON.parse(i):(r.tag="screen",r.module="",r.window="",r.hwnd="0",r.wclient="0",r.left="0",r.top="0",r.width="0",r.height="0"),r.wclient=t?"1":"0",e.setValue(f.XML.parseJSON(r)).then(function(){n(e)})})})},e.prototype.isStickToTitle=function(){var t=this;return new Promise(function(e){o.Item.get("prop:ScrCapTrackWindowTitle",t._id).then(function(t){e("0"===t)})})},e.prototype.setStickToTitle=function(t){var e=this;return new Promise(function(n){o.Item.set("prop:ScrCapTrackWindowTitle",t?"0":"1",e._id).then(function(){n(e)})})},e}(p.Item);n.ScreenItem=h,r.applyMixins(h,[s.ItemLayout,a.ItemColor,u.ItemChroma,c.ItemTransition])},{"../../internal/item":38,"../../internal/util/json":39,"../../internal/util/mixin":40,"../../internal/util/xml":41,"../../util/rectangle":54,"./ichroma":13,"./icolor":14,"./ilayout":16,"./item":19,"./itransition":20}],23:[function(t,e,n){var i=t("../internal/util/json"),r=t("../internal/util/xml"),o=t("../internal/app"),s=t("../internal/internal"),a=t("./environment"),u=t("./source/source"),c=t("./source/game"),p=t("./source/camera"),l=t("./source/audio"),m=t("./source/html"),f=t("./source/flash"),h=t("./source/screen"),d=t("./source/image"),g=t("./source/media"),v=t("./items/item"),y=t("./items/game"),_=t("./items/camera"),w=t("./items/audio"),S=t("./items/html"),P=t("./items/flash"),I=t("./items/screen"),b=t("./items/image"),E=t("./items/media"),C=function(){function t(t){this._id=t-1}return t._initializeScenePool=function(){if(0===t._scenePool.length)for(var e=0;e<t._maxScenes;e++)t._scenePool[e]=new t(e+1)},t._initializeScenePoolAsync=function(){return new Promise(function(e){o.App.get("presetcount").then(function(n){var i=Number(n);i>12?t._maxScenes=i:t._maxScenes=12;for(var r=0;r<t._maxScenes;r++)t._scenePool[r]=new t(r+1);e(t._maxScenes)})})},t.getById=function(e){return t._initializeScenePool(),t._scenePool[e-1]},t.getByIdAsync=function(e){return new Promise(function(n){t._initializeScenePoolAsync().then(function(i){n(t._scenePool[e-1])})})},t.getByName=function(e){return new Promise(function(n){t._initializeScenePoolAsync().then(function(i){var r=Promise.all(t._scenePool.map(function(n,i){return o.App.get("presetname:"+i).then(function(n){return e===n?t._scenePool[i]:null})}));r.then(function(t){for(var e=[],i=0;i<t.length;++i)null!==t[i]&&e.push(t[i]);n(e)})})})},t.getActiveScene=function(){return new Promise(function(e,n){a.Environment.isSourcePlugin()?n(Error("Not supported on source plugins")):o.App.get("preset:0").then(function(e){return t.getByIdAsync(Number(e)+1)}).then(function(t){e(t)})})},t.setActiveScene=function(e){return new Promise(function(n,i){a.Environment.isSourcePlugin()?i(Error("Not supported on source plugins")):e instanceof t?e.getId().then(function(t){o.App.set("preset",String(t)).then(function(t){n(t)})}):"number"==typeof e?1>e||e>12?i(Error("Invalid parameters. Valid range is 1 to 12.")):o.App.set("preset",String(e-1)).then(function(t){n(t)}):i(Error("Invalid parameters"))})},t.searchSourcesById=function(e){return new Promise(function(n,i){var r=/^{[A-F0-9\-]*}$/i.test(e);r?t._initializeScenePoolAsync().then(function(i){var r=null,o=!1;t._scenePool.forEach(function(t,i,s){null===r&&t.getItems().then(function(t){o=t.some(function(t){return t._id===e.toUpperCase()?(r=t,!0):!1}),(o||Number(this)===s.length-1)&&n(r)}.bind(i))})}):i(Error("Not a valid ID format for sources"))})},t.searchScenesBySourceId=function(e){return new Promise(function(n,i){var r=/^{[A-F0-9-]*}$/i.test(e);r?t._initializeScenePoolAsync().then(function(i){var r=null,o=!1;t._scenePool.forEach(function(t,i,s){null===r&&t.getSources().then(function(a){o=a.some(function(t){return t._id===e.toUpperCase()}),o?n(t):i===s.length-1&&n(r)})})}):i(Error("Not a valid ID format for sources"))})},t.searchSourcesByName=function(t){var e=this;return new Promise(function(n){e.filterSources(function(e,n){e.getCustomName().then(function(i){return i.match(t)?void n(!0):e.getName()}).then(function(i){if(void 0!==i){if(!i.match(t))return e.getValue();n(!0)}}).then(function(e){void 0!==e&&n(e.toString().match(t)?!0:!1)})}).then(function(t){n(t)})})},t.filterSources=function(e){return new Promise(function(n,i){t._initializeScenePoolAsync().then(function(r){var o=[];return"function"==typeof e?Promise.all(t._scenePool.map(function(t){return new Promise(function(n){t.getSources().then(function(t){return 0!==t.length?Promise.all(t.map(function(t){return new Promise(function(n){e(t,function(e){e&&o.push(t),n()})})})).then(function(){n()}):void n()})["catch"](function(){n()})})})).then(function(){n(o)}):void i(Error("Parameter is not a function"))})})},t.filterScenesBySources=function(e){return new Promise(function(n,i){t._initializeScenePoolAsync().then(function(r){var o=[];return"function"==typeof e?Promise.all(t._scenePool.map(function(t){return new Promise(function(n){t.getSources().then(function(i){return 0!==i.length?Promise.all(i.map(function(n){return new Promise(function(i){e(n,function(e){e&&o.push(t),i()})})})).then(function(){n()}):void n()})})})).then(function(){n(o)}):void i(Error("Parameter is not a function"))})})},t.initializeScenes=function(){return new Promise(function(t,e){a.Environment.isSourcePlugin()&&e(Error("function is not available for source")),o.App.get("presetcount").then(function(e){12!==Number(e)?o.App.set("presetconfig:11",'<placement name="Scene 12" defpos="0" />').then(function(e){t(e)}):t(!0)})})},t.prototype.getSceneNumber=function(){var t=this;return new Promise(function(e){e(t._id+1)})},t.prototype.getName=function(){var t=this;return new Promise(function(e){o.App.get("presetname:"+t._id).then(function(t){e(t)})})},t.prototype.setName=function(t){var e=this;return new Promise(function(n,i){a.Environment.isSourcePlugin()?i(Error("Scene names are readonly for source plugins.")):o.App.set("presetname:"+e._id,t).then(function(t){n(t)})})},t.prototype.getSources=function(){var t=this;return new Promise(function(e,n){o.App.getAsList("presetconfig:"+t._id).then(function(n){var i=[],r=function(t){return new Promise(function(e){var i=n[t],r=Number(i.type);e(r===u.SourceTypes.GAMESOURCE?new c.GameSource(i):r===u.SourceTypes.HTML?new m.HtmlSource(i):r===u.SourceTypes.SCREEN?new h.ScreenSource(i):r===u.SourceTypes.BITMAP||r===u.SourceTypes.FILE&&/\.gif$/.test(i.item)?new d.ImageSource(i):r===u.SourceTypes.FILE&&/\.(gif|xbs)$/.test(i.item)===!1&&/^(rtsp|rtmp):\/\//.test(i.item)===!1?new g.MediaSource(i):Number(i.type)===u.SourceTypes.LIVE&&-1===i.item.indexOf("{33D9A762-90C8-11D0-BD43-00A0C911CE86}")?new p.CameraSource(i):Number(i.type)===u.SourceTypes.LIVE&&-1!==i.item.indexOf("{33D9A762-90C8-11D0-BD43-00A0C911CE86}")?new l.AudioSource(i):Number(i.type)===u.SourceTypes.FLASHFILE?new f.FlashSource(i):new u.Source(i))})};if(Array.isArray(n))for(var o=0;o<n.length;o++)n[o].sceneId=t._id,i.push(r(o));Promise.all(i).then(function(t){e(t)})})["catch"](function(t){n(t)})})},t.prototype.getItems=function(){var t=this;return new Promise(function(e,n){o.App.getAsList("presetconfig:"+t._id).then(function(n){var i=[],r=function(t){return new Promise(function(e){var i=n[t],r=Number(i.type);e(r===v.ItemTypes.GAMESOURCE?new y.GameItem(i):r===v.ItemTypes.HTML?new S.HtmlItem(i):r===v.ItemTypes.SCREEN?new I.ScreenItem(i):r===v.ItemTypes.BITMAP||r===v.ItemTypes.FILE&&/\.gif$/.test(i.item)?new b.ImageItem(i):r===v.ItemTypes.FILE&&/\.(gif|xbs)$/.test(i.item)===!1&&/^(rtsp|rtmp):\/\//.test(i.item)===!1?new E.MediaItem(i):Number(i.type)===v.ItemTypes.LIVE&&-1===i.item.indexOf("{33D9A762-90C8-11D0-BD43-00A0C911CE86}")?new _.CameraItem(i):Number(i.type)===v.ItemTypes.LIVE&&-1!==i.item.indexOf("{33D9A762-90C8-11D0-BD43-00A0C911CE86}")?new w.AudioItem(i):Number(i.type)===v.ItemTypes.FLASHFILE?new P.FlashItem(i):new v.Item(i))})};if(Array.isArray(n))for(var o=0;o<n.length;o++)n[o].sceneId=t._id,i.push(r(o));Promise.all(i).then(function(t){e(t)})})["catch"](function(t){n(t)})})},t.prototype.isEmpty=function(){var t=this;return new Promise(function(e){o.App.get("presetisempty:"+t._id).then(function(t){e("1"===t)})})},t.prototype.setSourceOrder=function(e){var n=this;return new Promise(function(c,p){if(a.Environment.isSourcePlugin())p(Error("not available for source plugins"));else{e.reverse();var l=[];t.getActiveScene().then(function(t){return e.every(function(t){return t instanceof u.Source})?new Promise(function(i){var r=[];for(var o in e)r.push(function(t){return new Promise(function(i){e[t].getId().then(function(e){l[t]=e,i(n)})})}(o));Promise.all(r).then(function(){return t.getSceneNumber()}).then(function(t){i(t)})}):(l=e,t.getSceneNumber())}).then(function(t){if(Number(t)-1===n._id&&a.Environment.isSourceConfig())s.exec("SourcesListOrderSave",l.join(",")),c(n);else{var e;n.getName().then(function(t){return e=t,o.App.getAsList("presetconfig:"+n._id)}).then(function(t){var s=new i.JSON;if(s.children=[],s.tag="placement",s.name=e,Array.isArray(t)){for(var a=["name","cname","item"],u=0;u<t.length;u++){for(var m=0;m<a.length;m++)t[u][a[m]]=t[u][a[m]].replace(/([^\\])(\\)([^\\])/g,"$1\\\\$3"),t[u][a[m]]=t[u][a[m]].replace(/"/g,"&quot;");s.children[l.indexOf(t[u].id)]=t[u]}o.App.set("presetconfig:"+n._id,r.XML.parseJSON(s).toString()).then(function(){c(n)})}else p(Error("Scene does not have any source"))})}})}})},t._maxScenes=12,t._scenePool=[],t}();n.Scene=C},{"../internal/app":34,"../internal/internal":37,"../internal/util/json":39,"../internal/util/xml":41,"./environment":4,"./items/audio":6,"./items/camera":7,"./items/flash":9,"./items/game":10,"./items/html":11,"./items/image":17,"./items/item":19,"./items/media":21,"./items/screen":22,"./source/audio":24,"./source/camera":25,"./source/flash":26,"./source/game":27,"./source/html":28,"./source/image":29,"./source/media":30,"./source/screen":31,"./source/source":32}],24:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},r=t("../items/audio"),o=function(t){function e(){t.apply(this,arguments)}return i(e,t),e}(r.AudioItem);n.AudioSource=o},{"../items/audio":6}],25:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},r=t("../items/camera"),o=function(t){function e(){t.apply(this,arguments)}return i(e,t),e}(r.CameraItem);n.CameraSource=o},{"../items/camera":7}],26:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},r=t("../items/flash"),o=function(t){function e(){t.apply(this,arguments)}return i(e,t),e}(r.FlashItem);n.FlashSource=o},{"../items/flash":9}],27:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},r=t("../items/game"),o=function(t){function e(){t.apply(this,arguments)}return i(e,t),e}(r.GameItem);n.GameSource=o},{"../items/game":10}],28:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},r=t("../items/html"),o=function(t){function e(){t.apply(this,arguments)}return i(e,t),e}(r.HtmlItem);n.HtmlSource=o},{"../items/html":11}],29:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},r=t("../items/image"),o=function(t){function e(){t.apply(this,arguments)}return i(e,t),e}(r.ImageItem);n.ImageSource=o},{"../items/image":17}],30:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},r=t("../items/media"),o=function(t){function e(){t.apply(this,arguments)}return i(e,t),e}(r.MediaItem);n.MediaSource=o},{"../items/media":21}],31:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},r=t("../items/screen"),o=function(t){function e(){t.apply(this,arguments)}return i(e,t),e}(r.ScreenItem);n.ScreenSource=o},{"../items/screen":22}],32:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},r=t("../items/item");!function(t){t[t.UNDEFINED=0]="UNDEFINED",t[t.FILE=1]="FILE",t[t.LIVE=2]="LIVE",t[t.TEXT=3]="TEXT",t[t.BITMAP=4]="BITMAP",t[t.SCREEN=5]="SCREEN",t[t.FLASHFILE=6]="FLASHFILE",t[t.GAMESOURCE=7]="GAMESOURCE",t[t.HTML=8]="HTML"}(n.SourceTypes||(n.SourceTypes={}));n.SourceTypes;!function(t){t[t.MAIN=0]="MAIN",t[t.PREVIEW=1]="PREVIEW",t[t.THUMBNAIL=2]="THUMBNAIL"}(n.ViewTypes||(n.ViewTypes={}));var o=(n.ViewTypes,function(t){function e(){t.apply(this,arguments)}return i(e,t),e}(r.Item));n.Source=o},{"../items/item":19}],33:[function(t,e,n){var i=t("../internal/app"),r=function(){function t(e,n){void 0===n&&(n=null);var i=t._transitionMap[e];if("undefined"!=typeof i)this._key=e,this._value=i;else if("stinger:"===e.substring(0,8)){if("undefined"!=typeof n&&null!==n)this._key=n;else{var r=e.split(",")[0].split("\\").pop().split("/").pop(),o=r.lastIndexOf(".webm");o>=0&&o+r.length>=r.length&&(r=r.substring(0,o));var s=r.lastIndexOf("_");s>=0&&s+r.length>=r.length&&(r=r.substring(0,s)+": "+r.substring(s+1)+"ms"),this._key=r}this._value=e}else this._key=e,this._value=e.toLowerCase()}return t.prototype.toString=function(){return this._value},t.prototype.toTransitionKey=function(){return this._key},t.getSceneTransitions=function(){return new Promise(function(e){var n=[],r=i.App.getGlobalProperty("transitions");try{if(""!==r){for(var o=JSON.parse(r),s=o.length-1;s>=0;s--){var a=o[s];a.hasOwnProperty("Id")&&a.hasOwnProperty("Name")&&n.push(new t(a.Id,a.Name))}e(n)}else e(n)}catch(u){throw new Error("Error retrieving available transitions")}})},t._transitionMap={NONE:"",CLOCK:"clock",COLLAPSE:"collapse",FADE:"fade",FAN:"fan",HOLE:"hole",MOVE_BOTTOM:"move_bottom",MOVE_LEFT:"move_left",MOVE_LEFT_RIGHT:"move_left_right",MOVE_RIGHT:"move_right",MOVE_TOP:"move_top",MOVE_TOP_BOTTOM:"move_top_bottom",WAVE:"wave"},t.NONE=new t("NONE"),t.CLOCK=new t("CLOCK"),t.COLLAPSE=new t("COLLAPSE"),t.FADE=new t("FADE"),t.FAN=new t("FAN"),t.HOLE=new t("HOLE"),t.MOVE_BOTTOM=new t("MOVE_BOTTOM"),t.MOVE_LEFT=new t("MOVE_LEFT"),t.MOVE_LEFT_RIGHT=new t("MOVE_LEFT_RIGHT"),t.MOVE_RIGHT=new t("MOVE_RIGHT"),t.MOVE_TOP=new t("MOVE_TOP"),t.MOVE_TOP_BOTTOM=new t("MOVE_TOP_BOTTOM"),t.WAVE=new t("WAVE"),t}();n.Transition=r},{"../internal/app":34}],34:[function(t,e,n){var i=t("./internal"),r=t("./util/json"),o=function(){function t(){}return t.get=function(t){return new Promise(function(e){i.exec("AppGetPropertyAsync",t,e)})},t.set=function(t,e){return new Promise(function(n){i.exec("AppSetPropertyAsync",t,e,function(t){n(!(Number(t)<0))})})},t.getAsList=function(e){return new Promise(function(n,i){t.get(e).then(function(t){try{var e=r.JSON.parse(t),o=[];e.children&&e.children.length>0&&(o=e.children),n(o)}catch(s){i(s)}})})},t.getGlobalProperty=function(t){return i.exec("GetGlobalProperty",t)},t.callDll=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=[].slice.call(arguments);return r.unshift("CallDll"),i.exec.apply(this,r)},t.callFunc=function(t,e){return new Promise(function(n){i.exec("AppCallFuncAsync",t,e,function(t){n(t)})})},t.postMessage=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return new Promise(function(r){n.unshift(t),n.unshift("PostMessageToParent"),n.push(function(t){r(t)}),i.exec.apply(e,n)})},t}();n.App=o},{"./internal":37,"./util/json":39}],35:[function(t,e,n){var i=function(){function t(){}return t.addInitializationPromise=function(e){t.initialPromises.push(e)},t.getInitializationPromises=function(){return t.initialPromises},t.setPersistentConfig=function(e){t.persistedConfig=e},t.getPersistentConfig=function(){return t.persistedConfig},t.persistedConfig={},t.initialPromises=[],t}();n.Global=i},{}],36:[function(t,e,n){function i(t,e){if("http://"===t.substring(0,7)||"https://"===t.substring(0,8))return t;if("//"===t.substring(0,2))return e.split("://")[0]+":"+t;if("../"===t.substring(0,3)){for(var n=0;"../"===t.substring(0,3);)t=t.substring(3),++n;var i=e.split("/");return i=i.slice(0,length-1-n),i.push(t),i.join("/")}"./"===t.substring(0,2)&&(t=t.substring(2));var r=e.split("/");return r[r.length-1]=t,r.join("/")}function r(){return new Promise(function(t){if(u.Environment.isSourcePlugin()){var e={},n=new Promise(function(t){p.exec("GetLocalPropertyAsync","prop:BrowserConfiguration",function(e){t(e)})});n.then(function(n){try{""!==n&&"null"!==n||(n=p.exec("GetConfiguration")),e=JSON.parse(n)}catch(r){}finally{for(var o=document.getElementsByTagName("meta"),s=o.length-1;s>=0;s--)if("xsplit:config-url"===o[s].name){var a=i(o[s].content,window.location.href);e.configUrl=a;var u={configUrl:a};l.Global.setPersistentConfig(u);break}p.exec("SetBrowserProperty","Configuration",JSON.stringify(e)),t()}})}else t()})}function o(){return new Promise(function(t){u.Environment.isSourceConfig()?p.exec("GetLocalPropertyAsync","prop:id",function(e){var n=e;c.Item.setBaseId(n),t()}):t()})}function s(){return new Promise(function(t){u.Environment.isSourceConfig()?window.addEventListener("load",function(){m.SourcePropsWindow.getInstance().emit("config-load"),t()}):t()})}function a(){l.Global.addInitializationPromise(r()),l.Global.addInitializationPromise(o()),l.Global.addInitializationPromise(s()),Promise.all(l.Global.getInitializationPromises()).then(function(){document.dispatchEvent(new CustomEvent("xsplit-js-ready",{bubbles:!0}))})}var u=t("../core/environment"),c=t("./item"),p=t("./internal"),l=t("./global"),m=t("../window/config");a()},{"../core/environment":4,"../window/config":55,"./global":35,"./internal":37,"./item":38}],37:[function(t,e,n){function i(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=null,s=!1;return e.length>0&&(o=e[e.length-1],o instanceof Function?e.pop():o=null),n.DEBUG&&console.log(['internal.exec("',t,'") ',JSON.stringify(e)].join(" ")),window.external&&window.external[t]&&window.external[t]instanceof Function&&(s=window.external[t].apply(this,e)),null!==o&&(r[s]=o),s}n.DEBUG=!1;var r={};n.exec=i,window.OnAsyncCallback=function(t,e){var n=r[t];n instanceof Function&&n.call(this,decodeURIComponent(e))}},{}],38:[function(t,e,n){var i=t("./internal"),r=t("../core/environment"),o=function(){function t(){}return t.attach=function(e){var n=t.itemSlotMap.indexOf(e);return-1===n&&(n=++t.lastSlot%t.MAX_SLOTS,t.islockedSourceSlot&&0===n&&++n,t.lastSlot=n,t.itemSlotMap[n]=e,r.Environment.isSourcePlugin()?i.exec("AttachVideoItem"+(n+1),e):i.exec("SearchVideoItem"+("0"===String(n)?"":n+1),e)),n},t.get=function(e,n){return new Promise(function(o){var s=void 0!==n&&null!==n?t.attach(n):-1;r.Environment.isSourcePlugin()||"0"!==String(s)||(s=-1),i.exec("GetLocalPropertyAsync"+("-1"===String(s)?"":s+1),e,function(t){o(t)})})},t.set=function(e,n,o){return new Promise(function(s){var a=void 0!==o&&null!==o?t.attach(o):-1;r.Environment.isSourcePlugin()||"0"!==String(a)||(a=-1),i.exec("SetLocalPropertyAsync"+("-1"===String(a)?"":a+1),e,n,function(t){s(!(Number(t)<0))})})},t.setBaseId=function(e){t.baseID=e},t.getBaseId=function(){return t.baseID},t.MAX_SLOTS=2,t.lastSlot=t.MAX_SLOTS-1,t.itemSlotMap=[],t.islockedSourceSlot=!1,t}();n.Item=o},{"../core/environment":4,"./internal":37}],39:[function(t,e,n){var i=t("./xml"),r=function(){function t(e){if(void 0!==e&&""!==e){var n=e;e instanceof i.XML&&(n=e.toString());var r=/<([^\s>\/]+)/g,o=/(\/>)/g,s=r.exec(n),a=o.exec(n),u=(new DOMParser).parseFromString(n,"application/xml");if(u.getElementsByTagName("parsererror").length>0)throw new Error("XML parsing error. Invalid XML string");var c=function(e){var i=new t;i.tag=e.tagName,s=r.exec(n),null===s&&0===o.lastIndex||(null===s&&o.lastIndex>0?(i.selfclosing=!0,a=o.exec(n)):null!==s&&o.lastIndex>r.lastIndex||null!==s&&o.lastIndex<r.lastIndex&&o.lastIndex===r.lastIndex-s[0].length&&(i.selfclosing=!0,a=o.exec(n)));for(var u=0;u<e.attributes.length;u++){var p=e.attributes[u];i[p.name]=p.value}i.children=[];for(var l=0;l<e.childNodes.length;l++){var m=e.childNodes[l];m instanceof Element&&i.children.push(c(m))}return void 0===i.value&&0===i.children.length&&(delete i.children,i.value=e.textContent),i};return c(u.childNodes[0])}}return t.parse=function(e){return new t(e)},t}();n.JSON=r},{"./xml":41}],40:[function(t,e,n){function i(t,e){e.forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(n){"constructor"!==n&&(t.prototype[n]=e.prototype[n])})})}n.applyMixins=i},{}],41:[function(t,e,n){var i=function(){function t(e){var n="",i="";void 0===e.value&&(e.value="");for(var r in e)t.RESERVED_ATTRIBUTES.test(r)||void 0===e[r]||(n+=[" ",r,'="',e[r],'"'].join(""));void 0===e.children&&(e.children=[]);for(var o=0,s=e.children;o<s.length;o++){var a=s[o];e.value+=new t(a).toString()}e.selfclosing===!0?this.xml=["<",e.tag,n,"/>"].join(""):""!==i?this.xml=["<",e.tag,n,">",i,"</",e.tag,">"].join(""):this.xml=["<",e.tag,n,">",e.value,"</",e.tag,">"].join("")}return t.prototype.toString=function(){return this.xml},t.parseJSON=function(e){return new t(e)},t.encode=function(t){return t.replace(/[&<>'']/g,function(t){return"&"+{"&":"amp","<":"lt",">":"gt","'":"quot",'"':"#39"}[t]+";"})},t.RESERVED_ATTRIBUTES=/^(children|tag|value|selfclosing)$/i,t}();n.XML=i},{}],42:[function(t,e,n){var i=t("../internal/util/json"),r=t("../internal/util/xml"),o=function(){function t(t){this._defaultConsole=!1,this._defaultMultimedia=!1,this._defaultCommunication=!1,t=t||{},this._id=t.id,this._name=t.name,this._adapter=t.adapter,this._adapterdev=t.adapterdev,this._dSoundGuid=t.dSoundGuid,this._dataFlow=t.dataFlow,this._state=t.state,this._defaultConsole=t.defaultConsole,this._defaultMultimedia=t.defaultMultimedia,this._defaultCommunication=t.defaultCommunication,this._level=void 0!==t.level?t.level:1,this._enable=void 0!==t.enable?t.enable:!0,this._hwlevel=void 0!==t.hwlevel?t.hwlevel:-1,this._hwenable=void 0!==t.hwenable?t.hwenable:255,this._delay=void 0!==t.delay?t.delay:0,this._mix=void 0!==t.mix?t.mix:0}return t.prototype.getId=function(){return this._id},t.prototype.getName=function(){return this._name},t.prototype.getDataFlow=function(){return this._dataFlow},t.prototype.isDefaultDevice=function(){return this._defaultConsole&&this._defaultMultimedia},t.prototype.getLevel=function(){return this._level},t.prototype._setLevel=function(t){return this._level=t,this},t.prototype.isEnabled=function(){return this._enable},t.prototype._setEnabled=function(t){return this._enable=t,this},t.prototype.getSystemLevel=function(){return this._hwlevel},t.prototype._setSystemLevel=function(t){return this._hwlevel=t,this},t.prototype.getSystemEnabled=function(){return this._hwenable},t.prototype._setSystemEnabled=function(t){return this._hwenable=t,this},t.prototype.getDelay=function(){return this._delay},t.prototype._setDelay=function(t){return this._delay=t,this},t.prototype.toString=function(){var t=new i.JSON;return t.tag="dev",t.selfclosing=!0,t.id=this.getId(),t.level=(this.getLevel()/100).toFixed(6),t.enable=this.isEnabled()?1:0,t.hwlevel=(this.getSystemLevel()/100).toFixed(6),t.hwenable=this.getSystemEnabled(),t.delay=this.getDelay(),t.mix=this._mix,r.XML.parseJSON(t).toString()},t.parse=function(e){var n=new t({id:e.id,name:e.name,adapter:e.adapter,adapterdev:e.adapterdev,dataFlow:e.DataFlow,state:e.State,dSoundGuid:e.DSoundGuid,defaultCommunication:"1"===e.DefaultCommunication,defaultConsole:"1"===e.DefaultConsole,defaultMultimedia:"1"===e.DefaultMultimedia});return n._setLevel(Number(void 0!==e.level?100*e.level:100))._setEnabled(void 0!==e.enable?"1"===e.enable:!0)._setSystemLevel(Number(void 0!==e.hwlevel?100*e.hwlevel:-100))._setSystemEnabled(Number(void 0!==e.hwenable?e.hwenable:255))._setDelay(Number(void 0!==e.delay?e.delay:0)),n},t.STATE_ACTIVE="Active",t.DATAFLOW_RENDER="Render",t.DATAFLOW_CAPTURE="Capture",t.SYSTEM_LEVEL_MUTE=0,t.SYSTEM_LEVEL_ENABLE=1,t.SYSTEM_MUTE_CHANGE_NOT_ALLOWED=255,t}();n.AudioDevice=o},{"../internal/util/json":39,"../internal/util/xml":41}],43:[function(t,e,n){var i=t("../internal/util/json"),r=t("../internal/util/xml"),o=t("../internal/app"),s=function(){function t(t){this._id=t.id,this._name=t.name}return t.prototype.getId=function(){return this._id},t.prototype.getName=function(){return this._name},t.prototype.toXML=function(){var t=new i.JSON;return t.disp=this._id,t.name=this._name,r.XML.parseJSON(t)},t.parse=function(e){var n=new t({id:e.disp,name:e.name});return n},t.prototype.addToScene=function(){var t=this;return new Promise(function(e){o.App.callFunc("addcamera","dev:"+t._id).then(function(){e(!0)})})},t}();n.CameraDevice=s},{"../internal/app":34,
"../internal/util/json":39,"../internal/util/xml":41}],44:[function(t,e,n){var i=t("../internal/app"),r=function(){function t(t){this._path=t}return t.prototype.addToScene=function(){var t=this;return new Promise(function(e){i.App.callFunc("addfile",t._path).then(function(){e(!0)})})},t}();n.File=r},{"../internal/app":34}],45:[function(t,e,n){var i=t("../util/rectangle"),r=t("../internal/util/json"),o=t("../internal/util/xml"),s=t("../internal/app"),a=function(){function t(){}return t.prototype.getPid=function(){return this._pid},t.prototype.getHandle=function(){return this._handle},t.prototype.getWindowHandle=function(){return this._hwnd},t.prototype.getGapiType=function(){return this._gapitype},t.prototype.getResolution=function(){return i.Rectangle.fromDimensions(this._width,this._height)},t.prototype.isFullscreen=function(){return 1===this._flags},t.prototype.getWindowName=function(){return this._wndname},t.prototype.getLastFrameTimestamp=function(){return this._lastframets},t.prototype.getFpsRender=function(){return this._fpsRender},t.prototype.getFpsCapture=function(){return this._fpsCapture},t.prototype.getImageName=function(){return this._imagename},t.prototype.getReplace=function(){return this._replace},t.parse=function(e){var n=new t;return n._pid=void 0!==e.pid?parseInt(e.pid):void 0,n._handle=void 0!==e.handle?parseInt(e.handle):void 0,n._hwnd=void 0!==e.hwnd?parseInt(e.hwnd):void 0,n._gapitype=e.GapiType,n._width=void 0!==e.width?parseInt(e.width):void 0,n._height=void 0!==e.height?parseInt(e.height):void 0,n._flags=void 0!==e.flags?parseInt(e.flags):void 0,n._wndname=e.wndname,n._lastframets=void 0!==e.lastframets?parseInt(e.lastframets):void 0,n._fpsRender=void 0!==e.fpsRender?Number(e.fpsRender):void 0,n._fpsCapture=void 0!==e.fpsCapture?Number(e.fpsCapture):void 0,n._imagename=e.imagename,n._replace=e.replace,n},t.prototype.toXML=function(){var t=new r.JSON;return t.tag="src",t.pid=this._pid,t.handle=this._handle,t.hwnd=this._hwnd,t.gapitype=this._gapitype,t.width=this._width,t.height=this._height,t.flags=this._flags,t.wndname=this._wndname,t.lastframets=this._lastframets,t.selfclosing=!0,o.XML.parseJSON(t)},t.prototype.addToScene=function(){var t=this;return new Promise(function(e){s.App.callFunc("addgamesource","dev:"+t.toXML()).then(function(){e(!0)})})},t.autoDetect=function(){if(void 0===t._autoDetect){t._autoDetect=new t;var e=t._autoDetect;e._pid=0,e._handle=0,e._hwnd=0,e._gapitype="",e._width=0,e._height=0,e._flags=0,e._wndname="",e._lastframets=0,e._fpsRender=0,e._fpsCapture=0,e._imagename="",t._autoDetect.addToScene=function(){return new Promise(function(t){var e='<item GameCapTrackActive="1" GameCapTrackActiveFullscreen="0" item="&lt;src pid=&quot;0&quot; handle=&quot;0&quot; hwnd=&quot;0&quot; GapiType=&quot;&quot; width=&quot;0&quot; height=&quot;0&quot; flags=&quot;0&quot; wndname=&quot;&quot; lastframets=&quot;0&quot; fpsRender=&quot;0.000000&quot; fpsCapture=&quot;0.000000&quot; imagename=&quot;&quot;/&gt; " name="Game: Auto Detect"  type="7" pos_left="0" pos_top="0" pos_right="0.5" pos_bottom="0.5"/>';s.App.callFunc("additem",e).then(function(){t(!0)})})}}return t._autoDetect},t}();n.Game=a},{"../internal/app":34,"../internal/util/json":39,"../internal/util/xml":41,"../util/rectangle":54}],46:[function(t,e,n){var i=t("../internal/util/json"),r=t("../internal/util/xml"),o=t("../internal/app"),s=function(){function t(){}return t.parse=function(e){var n=new t;return n._disp=e.disp,n._name=e.name,n},t.prototype.getDisplayId=function(){return this._disp},t.prototype.toXML=function(){var t=new i.JSON;return t.tag="item",t.item=this._disp,t.name=this._name,t.type="2",t.selfclosing=!0,r.XML.parseJSON(t)},t.prototype.addToScene=function(){var t=this;return new Promise(function(e){o.App.callFunc("additem",t.toXML().toString()).then(function(){e(!0)})})},t}();n.MicrophoneDevice=s},{"../internal/app":34,"../internal/util/json":39,"../internal/util/xml":41}],47:[function(t,e,n){var i=t("../internal/internal"),r=function(){function t(){}return t.prototype.addToScene=function(){return new Promise(function(t){i.exec("AppCallFunc","addscreen"),t(!0)})},t}();n.Screen=r},{"../internal/internal":37}],48:[function(t,e,n){var i=t("../internal/app"),r=t("./audio"),o=t("./microphone"),s=t("./camera"),a=t("./game"),u=t("../core/environment"),c=t("../internal/internal");!function(t){t[t.RENDER=1]="RENDER",t[t.CAPTURE=2]="CAPTURE",t[t.ALL=3]="ALL"}(n.AudioDeviceDataflow||(n.AudioDeviceDataflow={}));var p=n.AudioDeviceDataflow;!function(t){t[t.ACTIVE=1]="ACTIVE",t[t.DISABLED=2]="DISABLED",t[t.UNPLUGGED=4]="UNPLUGGED",t[t.NOTPRESENT=8]="NOTPRESENT",t[t.ALL=15]="ALL"}(n.AudioDeviceState||(n.AudioDeviceState={}));var l=n.AudioDeviceState,m=function(){function t(){}return t.getAudioDevices=function(t,e){return void 0===t&&(t=p.ALL),void 0===e&&(e=l.ACTIVE),new Promise(function(n){i.App.getAsList("wasapienum").then(function(i){var o=[];if(void 0!==i)for(var s=i.length,a=0;s>a;++a){var u=i[a],c=l[String(u.State).toUpperCase().replace(/\s+/g,"")];if((c&e)===c){var m=p[String(u.DataFlow).toUpperCase()];(m&t)===m&&(u.name.toLowerCase().indexOf("xsplit")>-1||o.push(r.AudioDevice.parse(u)))}}n(o)})})},t.getCameraDevices=function(){return new Promise(function(t){i.App.getAsList("dshowenum:vsrc").then(function(e){var n=[];if(void 0!==e){for(var i=0;i<e.length;i++){var r=e[i];-1===String(r.disp).toLowerCase().indexOf("xsplit")&&String(r.disp).toLowerCase()!=="@DEVICE:SW:{860BB310-5D01-11D0-BD3B-00A0C911CE86}\\{778abfb2-e87b-48a2-8d33-675150fcf8a2}".toLowerCase()&&n.push(s.CameraDevice.parse(r))}t(n)}})})},t.getGames=function(){return new Promise(function(t){i.App.getAsList("gsenum").then(function(e){var n=[];if(void 0!==e)for(var i=e.length,r=0;i>r;++r)n.push(a.Game.parse(e[r]));t(n)})})},t.getMicrophones=function(){return new Promise(function(t){i.App.getAsList("dshowenum:asrc").then(function(e){var n=[];if(void 0!==e)for(var i=e.length,r=0;i>r;++r)void 0!==e[r].WaveInId&&n.push(o.MicrophoneDevice.parse(e[r]));t(n)})})},t.getFonts=function(){return new Promise(function(t,e){u.Environment.isSourcePlugin()?e(Error("function is not available for source")):i.App.get("html:fontlist").then(function(n){if("string"==typeof n&&""!==n){var i=n.split(",");t(i)}else e(Error("cannot fetch list of available system fonts"))})})},t.getCursorPosition=function(){return new Promise(function(t,e){if(u.Environment.isSourcePlugin())e(Error("function is not available for source"));else{var n=c.exec("GetCursorPos");if("string"==typeof n){var i=n.split(","),r={};r.x=Number(i[0]),r.y=Number(i[1]),t(r)}else e(Error("cannot fetch current cursor position"))}})},t.setCursorPosition=function(t){return new Promise(function(e,n){u.Environment.isSourcePlugin()?n(Error("function is not available for source")):"number"!=typeof t.x||"number"!=typeof t.y?n(Error("invalid parameters")):(c.exec("SetCursorPos",String(t.x),String(t.y)),e(!0))})},t}();n.System=m},{"../core/environment":4,"../internal/app":34,"../internal/internal":37,"./audio":42,"./camera":43,"./game":45,"./microphone":46}],49:[function(t,e,n){var i=t("../internal/app"),r=function(){function t(t){this._url=t}return t.prototype._getUrl=function(){var t=this;return new Promise(function(e,n){/^https?:\/\//i.test(t._url)?e(t._url):/[a-z]+:\/\//i.test(t._url)?n(new Error("You may only add HTTP or HTTPS URLs to the stage.")):e("http://"+t._url)})},t.prototype.addToScene=function(){var t=this;return new Promise(function(e,n){t._getUrl().then(function(t){i.App.callFunc("addurl",t).then(function(){e(!0)})})["catch"](function(t){n(t)})})},t}();n.Url=r},{"../internal/app":34}],50:[function(t,e,n){var i=function(){function t(t){if(void 0!==t.rgb)this.setRgb(t.rgb);else if(void 0!==t.irgb)this.setIrgb(t.irgb);else if(void 0!==t.bgr)this.setBgr(t.bgr);else{if(void 0===t.ibgr)throw new Error("Do not call Color constructor without parameters.");this.setIbgr(t.ibgr)}}return t.fromRGBString=function(e){return new t({rgb:e})},t.fromRGBInt=function(e){return new t({irgb:e})},t.fromBGRString=function(e){return new t({bgr:e})},t.fromBGRInt=function(e){return new t({ibgr:e})},t.prototype.getRgb=function(){return this._rgb},t.prototype.setRgb=function(t){return this._rgb=t.replace(/^#/,""),this._irgb=parseInt(this._rgb,16),this._bgr=[this._rgb.substring(4,6),this._rgb.substring(2,4),this._rgb.substring(0,2)].join(""),this._ibgr=parseInt(this._bgr,16),this},t.prototype.getBgr=function(){return this._bgr},t.prototype.setBgr=function(t){return this.setRgb([t.substring(4,6),t.substring(2,4),t.substring(0,2)].join("")),this},t.prototype.getIrgb=function(){return this._irgb},t.prototype.setIrgb=function(t){for(var e=t.toString(16);e.length<6;)e="0"+e;return this.setRgb(e),this},t.prototype.getIbgr=function(){return this._ibgr},t.prototype.setIbgr=function(t){for(var e=t.toString(16);e.length<6;)e="0"+e;return this.setBgr(e),this},t}();n.Color=i},{}],51:[function(t,e,n){var i=function(){function t(){this._handlers={}}return t.prototype.on=function(t,e){void 0===this._handlers[t]&&(this._handlers[t]=[]),this._handlers[t].push(e)},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(void 0!==this._handlers[t])for(var i=0,r=this._handlers[t];i<r.length;i++){var o=r[i];o.apply(this,e)}},t}();n.EventEmitter=i},{}],52:[function(t,e,n){var i=t("../internal/internal"),r=function(){function t(){}return t.getFileContent=function(t){return new Promise(function(e){e(i.exec("GetFileContent",t))})},t.getWebContent=function(t){return new Promise(function(e){i.exec("GetWebContent",t,function(t){e(t)})})},t.openUrl=function(t){i.exec("OpenUrl",t)},t.openFileDialog=function(e,n){return new Promise(function(r,o){var s=0;void 0!==e&&null!==e&&(e.allowMultiSelect===!0&&(s|=t._ALLOW_MULTI_SELECT),e.fileMustExist===!0&&(s|=t._FILE_MUST_EXIST),e.forceShowHidden===!0&&(s|=t._FORCE_SHOW_HIDDEN));var a="";void 0!==n&&null!==n&&void 0!==n.name&&void 0!==n.extensions&&(a=n.name+"|",a+=n.extensions.map(function(t){return"*."+t}).join(";"),a+="||"),i.exec("OpenFileDialogAsync",null,null,String(s),a,function(t){"null"!==t?r(t.split("|")):o(Error("File selection cancelled."))})})},t.getVideoDuration=function(e){return new Promise(function(n,r){void 0===t._callback[e]&&(t._callback[e]=[]),t._callback[e].push({resolve:n,reject:r}),i.exec("GetVideoDuration",e)})},t._ALLOW_MULTI_SELECT=512,t._FILE_MUST_EXIST=4096,t._FORCE_SHOW_HIDDEN=268435456,t._callback={},t}();n.IO=r,window.OnGetVideoDuration=function(t,e){r._callback[decodeURIComponent(t)].shift().resolve(e),0===r._callback[decodeURIComponent(t)].length&&delete r._callback[decodeURIComponent(t)]},window.OnGetVideoDurationFailed=function(t){r._callback[decodeURIComponent(t)].shift().reject(Error("Invalid file path.")),0===r._callback[decodeURIComponent(t)].length&&delete r._callback[decodeURIComponent(t)]}},{"../internal/internal":37}],53:[function(t,e,n){function i(){return s}function r(){o=!0}var o=!1,s=new Promise(function(t){document.addEventListener("xsplit-js-ready",function(){t()}),o&&t()});n.ready=i,n.setReady=r},{}],54:[function(t,e,n){var i=function(){function t(){}return t.prototype.getTop=function(){return this._top},t.prototype.setTop=function(t){return this._top=t,void 0!==this._bottom&&this._height!==this._top-this._bottom?this.setHeight(Math.abs(this._top-this._bottom)):void 0!==this._height&&this._bottom!==this._top+this._height&&this.setBottom(this._top+this._height),this},t.prototype.getLeft=function(){return this._left},t.prototype.setLeft=function(t){return this._left=t,void 0!==this._right&&this._width!==Math.abs(this._right-this._left)?this.setWidth(Math.abs(this._right-this._left)):void 0!==this._width&&this._height!==this._left+this._width&&this.setRight(this._left+this._width),this},t.prototype.getRight=function(){return this._right},t.prototype.setRight=function(t){return this._right=t,void 0!==this._left&&this._width!==Math.abs(this._right-this._left)?this.setWidth(Math.abs(this._right-this._left)):void 0!==this._width&&this._left!==this._right-this._width&&this.setLeft(this._right-this._width),this},t.prototype.getBottom=function(){return this._bottom},t.prototype.setBottom=function(t){return this._bottom=t,void 0!==this._top&&this._height!==Math.abs(this._top-this._bottom)?this.setHeight(Math.abs(this._top-this._bottom)):void 0!==this._height&&this._top!==this._bottom-this._height&&this.setTop(this._bottom-this._height),this},t.prototype.getWidth=function(){return this._width},t.prototype.setWidth=function(t){return this._width=t,void 0!==this._right&&this._left!==this._right-this._width?this.setLeft(this._right-this._width):void 0!==this._left&&this._right!==this._left+this._width&&this.setRight(this._left+this._width),this},t.prototype.getHeight=function(){return this._height},t.prototype.setHeight=function(t){return this._height=t,void 0!==this._top&&this._bottom!==this._top+this._height?this.setBottom(this._top+this._height):void 0!==this._bottom&&this._top!==this._bottom-this._height&&this.setTop(this._bottom-this._height),this},t.fromDimensions=function(e,n){if(0>e||0>n)throw new Error("Rectangle dimensions cannot be negative.");var i=new t;return i._width=e,i._height=n,i},t.fromCoordinates=function(e,n,i,r){if(n>r)throw new Error("Top coordinate must be smaller than bottom.");if(e>i)throw new Error("Right coordinate must be smaller than left.");var o=new t;return o._top=n,o._left=e,o.setRight(i),o.setBottom(r),o},t.prototype.toDimensionString=function(){return this._width+","+this._height},t.prototype.toCoordinateString=function(){if(void 0===this._left)throw new Error("This Rectangle instance does not have coordinates.");return this._left+","+this._top+","+this._right+","+this._bottom},t.prototype.toString=function(t){if(void 0===t)return this.toDimensionString();var e=t;return e=e.replace(":left",String(this._left)),e=e.replace(":top",String(this._top)),e=e.replace(":right",String(this._right)),e=e.replace(":bottom",String(this._bottom)),e=e.replace(":width",String(this._width)),e=e.replace(":height",String(this._height))},t}();n.Rectangle=i},{}],55:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},r=t("../util/eventemitter"),o=t("../internal/internal"),s=function(t){function e(){var n=this;t.call(this),window.addEventListener("message",function(t){try{var e=JSON.parse(t.data)}catch(n){return}switch(e.event){case"set-selected-tab":this.emit(e.event,e.value);break;case"async-callback":this.emit(e.event,{asyncId:e.value.asyncId,result:e.value.result})}}.bind(this)),this.on("config-load",function(){n._informConfigLoaded()}),e._instance=this}return i(e,t),e.getInstance=function(){return void 0===e._instance&&(e._instance=new e),e._instance},e.prototype._notify=function(t){window.parent.postMessage(JSON.stringify(t),"*")},e.prototype.useFullWindow=function(){this._setRenderMode(e._MODE_FULL),this.resize(354,390)},e.prototype.useTabbedWindow=function(t){this._setRenderMode(e._MODE_TABBED),this._declareCustomTabs(t.customTabs),this._setTabOrder(t.tabOrder)},e.prototype._setRenderMode=function(t){this._mode=t,this._notify({event:"set-mode",value:t})},e.prototype._setTabOrder=function(t){this._notify({event:"set-tab-order",value:JSON.stringify(t)})},e.prototype._declareCustomTabs=function(t){this._notify({event:"set-custom-tabs",value:JSON.stringify(t)})},e.prototype._informConfigLoaded=function(){this._notify({event:"load"})},e.prototype.resize=function(t,e){this._notify({event:"resize",value:JSON.stringify({width:t,height:e})})},e.prototype.requestDialogTitleChange=function(t){this._notify({event:"change-dialog-title",value:t})},e.prototype.close=function(){o.exec("Close")},e._MODE_FULL="full",e._MODE_TABBED="embedded",e}(r.EventEmitter);n.SourcePropsWindow=s},{"../internal/internal":37,"../util/eventemitter":51}],56:[function(t,e,n){var i=t("../util/rectangle"),r=t("../core/environment"),o=t("../internal/internal"),s=function(){function t(){var t=this;if(r.Environment.isSourcePlugin())throw new Error("Dialogs are not available for source plugins.");this._result=null;var e=function(n){n.target.removeEventListener(n.type,e),t._result=n.detail,t._resultListener=null};return document.addEventListener("xsplit-dialog-result",e),this._resultListener=e,this}return t.createDialog=function(e){var n=new t;return n._url=e,n},t.createAutoDialog=function(e){if(r.Environment.isSourceConfig())throw new Error("Auto dialogs are not available for config windows.");var n=new t;return n._url=e,n._autoclose=!0,n},t["return"]=function(t){void 0!==t&&o.exec("SetDialogResult",t),o.exec("Close")},t.prototype.setSize=function(t,e){return void 0===t&&(t=300),void 0===e&&(e=300),this._size=i.Rectangle.fromDimensions(t,e),this},t.prototype.setTitle=function(t){if(this._autoclose)throw new Error("Autoclosing dialogs cannot use this method.");return this._title=t,this},t.prototype.setBorderOptions=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),this._autoclose)throw new Error("Autoclosing dialogs cannot use this method.");return this._showBorder=t,this._resizable=e,this},t.prototype.setButtons=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),this._autoclose)throw new Error("Autoclosing dialogs cannot use this method.");return this._minimize=t,this._maximize=e,this},t.prototype.show=function(){return this._result=null,this._autoclose?o.exec("NewAutoDialog",this._url,"",void 0===this._size?void 0:this._size.getWidth()+","+this._size.getHeight()):o.exec("NewDialog",this._url,"",void 0===this._size?void 0:this._size.getWidth()+","+this._size.getHeight(),this._calculateFlags(),this._title),this},t.prototype.getResult=function(){var t=this;return new Promise(function(e){if(null!==t._result)e(t._result);else if(null===t._resultListener){var n=function(i){i.target.removeEventListener(i.type,n),t._result=i.detail,t._resultListener=null,e(t._result)};document.addEventListener("xsplit-dialog-result",n),t._resultListener=n}else Object.observe(t,function(t){var n=t.filter(function(t){return"_result"===t.name});void 0!==n&&n.length>0&&e(n[0].object._result)})})},t.prototype.close=function(){o.exec("CloseDialog")},t.prototype._calculateFlags=function(){var t=0;return this._showBorder&&(t+=1),this._resizable&&(t+=4),this._minimize&&(t+=8),this._maximize&&(t+=16),(this._title||this._minimize||this._maximize)&&(t+=2),String(t)},t}();n.Dialog=s,(r.Environment.isSourceConfig()||r.Environment.isExtension())&&(window.OnDialogResult=function(t){document.dispatchEvent(new CustomEvent("xsplit-dialog-result",{detail:t}))})},{"../core/environment":4,"../internal/internal":37,"../util/rectangle":54}],57:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},r=t("../core/environment"),o=t("../util/eventemitter"),s=t("../internal/internal"),a=t("../internal/app"),u="2",c=function(t){function e(){t.call(this),e._instance=this}return i(e,t),e.getInstance=function(){return void 0===e._instance&&(e._instance=new e),e._instance},e.prototype.resize=function(t,e){a.App.postMessage(u,String(t),String(e))},e.prototype.setTitle=function(t){e._value=t,a.App.postMessage("8")},e.prototype.setBorder=function(t){a.App.postMessage("4",String(t))},e.prototype.close=function(){a.App.postMessage("1")},e.prototype.disableClose=function(){a.App.postMessage("5","0")},e.prototype.enableClose=function(){a.App.postMessage("5","1")},e}(o.EventEmitter);n.ExtensionWindow=c,r.Environment.isExtension()&&(window.Setid=function(t){s.exec("CallHost","setExtensionWindowTitle:"+t,c._value)},window.OnSceneLoad=function(t,e){0===Number(t)&&c.getInstance().emit("scene-load",Number(e))},window.SourcesListHighlight=function(t,e){0===t&&c.getInstance().emit("sources-list-highlight",""===e?null:e)},window.SourcesListSelect=function(t,e){0===t&&c.getInstance().emit("sources-list-select",""===e?null:e)})},{"../core/environment":4,"../internal/app":34,"../internal/internal":37,"../util/eventemitter":51}],58:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},r=t("../internal/global"),o=t("../core/environment"),s=t("../util/eventemitter"),a=function(t){function e(){t.call(this),this.on("message-source",function(t){void 0!==t.request&&("saveConfig"===t.request?this.emit("save-config",this._hideGlobalConfig(t.data)):"applyConfig"===t.request&&this.emit("apply-config",this._hideGlobalConfig(t.data)))}),e._instance=this}return i(e,t),e.getInstance=function(){return void 0===e._instance&&(e._instance=new e),e._instance},e.prototype._hideGlobalConfig=function(t){var e=r.Global.getPersistentConfig();for(var n in e)delete t[n];return t},e}(s.EventEmitter);n.SourcePluginWindow=a,o.Environment.isSourcePlugin()&&(window.MessageSource=function(t){a.getInstance().emit("message-source",JSON.parse(t))},window.SetConfiguration=function(t){try{var e=JSON.parse(t),n=a.getInstance();n.emit("apply-config",e),n.emit("save-config",e)}catch(i){return}},window.setBackGroundColor=function(t){a.getInstance().emit("set-background-color",t)},window.OnSceneLoad=function(){a.getInstance().emit("scene-load")})},{"../core/environment":4,"../internal/global":35,"../util/eventemitter":51}],xjs:[function(t,e,n){function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}t("./internal/init"),i(t("./util/color")),i(t("./util/rectangle")),i(t("./util/io")),i(t("./core/environment")),i(t("./core/app")),i(t("./core/channel")),i(t("./core/scene")),i(t("./core/transition")),i(t("./core/dll")),i(t("./core/extension")),i(t("./core/source/source")),i(t("./core/source/camera")),i(t("./core/source/game")),i(t("./core/source/audio")),i(t("./core/source/html")),i(t("./core/source/flash")),i(t("./core/source/screen")),i(t("./core/source/image")),i(t("./core/source/media")),i(t("./core/items/item")),i(t("./core/items/camera")),i(t("./core/items/game")),i(t("./core/items/audio")),i(t("./core/items/html")),i(t("./core/items/flash")),i(t("./core/items/screen")),i(t("./core/items/image")),i(t("./core/items/media"));var r=t("./core/items/ichroma");n.KeyingType=r.KeyingType,n.ChromaPrimaryColors=r.ChromaPrimaryColors,n.ChromaAntiAliasLevel=r.ChromaAntiAliasLevel;var o=t("./core/items/iplayback");n.ActionAfterPlayback=o.ActionAfterPlayback;var s=t("./core/items/cuepoint");n.CuePoint=s.CuePoint,i(t("./system/system")),i(t("./system/audio")),i(t("./system/game")),i(t("./system/camera")),i(t("./system/microphone")),i(t("./system/url")),i(t("./system/screen")),i(t("./system/file")),i(t("./window/config")),i(t("./window/source")),i(t("./window/extension")),i(t("./window/dialog"));var a=t("./util/ready");n.ready=a.ready},{"./core/app":1,"./core/channel":2,"./core/dll":3,"./core/environment":4,"./core/extension":5,"./core/items/audio":6,"./core/items/camera":7,"./core/items/cuepoint":8,"./core/items/flash":9,"./core/items/game":10,"./core/items/html":11,"./core/items/ichroma":13,"./core/items/image":17,"./core/items/iplayback":18,"./core/items/item":19,"./core/items/media":21,"./core/items/screen":22,"./core/scene":23,"./core/source/audio":24,"./core/source/camera":25,"./core/source/flash":26,"./core/source/game":27,"./core/source/html":28,"./core/source/image":29,"./core/source/media":30,"./core/source/screen":31,"./core/source/source":32,"./core/transition":33,"./internal/init":36,"./system/audio":42,"./system/camera":43,"./system/file":44,"./system/game":45,"./system/microphone":46,"./system/screen":47,"./system/system":48,"./system/url":49,"./util/color":50,"./util/io":52,"./util/ready":53,"./util/rectangle":54,"./window/config":55,"./window/dialog":56,"./window/extension":57,"./window/source":58}]},{},["xjs"]);